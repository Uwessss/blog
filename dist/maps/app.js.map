/* fisker-blog v1.0.0 | (c) 2019 fisker Cheung | MIT License */
{"version":3,"sources":["app.js"],"names":["global","Function","config","require","Promise","callback","afterPromised","mod","resolve","document","_","now","Date","_toString","Object","prototype","toString","type","obj","call","slice","_slice","Array","toArray","from","isArray","isArrayLike","length","parseInt","_forEach","forEach","fn","i","_forInEach","key","hasOwnProperty","forIn","_map","map","arr","_filter","filter","result","filted","push","assign","target","arguments","source","value","hash","parse","pieces","split","data","decodeURIComponent","build","encodeURIComponent","sort","join","search","localforage","setItem","then","getItem","markdown","code","options","all","mods","marked","highlight","setOptions","lang","getLanguage","highlightAuto","escapeHtmlChar","reUnescapedHtml","escape","s","replace","c","templates","github","newToken","token","remaining","reset","randomId","Math","random","request","path","params","gc","head","removeChild","script","window","callbackName","createElement","access_token","src","GITHUB_ISSUES_API_BASE","appendChild","reject","response","onerror","err","handleResponse","message","meta","resetTokenRemaining","anonymousToken","rest","getToken","tokens","requestWithToken","getElementsByTagName","accessTokens","url","api","repoId","concat","owner","repo","get","catch","index","cached","page","expireTime","pageSize","pages","time","fetch","per_page","storage","article","Link","ETag","item","created_at","title","number","cache","render","id","body","html","app","showHTML","container","innerHTML","showError","console","trace","showIndex","name","showArticle","showLoading","showPage","query","location","promise","label","alert","history","go","getElementById","run","addEventListener"],"mappings":"AAAA,aACC,CAAC,UAAW,IACLA,CAAAA,CAAM,CAAGC,QAAQ,CAAC,aAAD,CAARA,EADJ,CAELC,CAAM,CAAG,CACf,IAAO,kBADQ,CAEf,aAAgB,CACd,CACE,GADF,CAEE,YAFF,CAGE,gBAHF,CAIE,iBAJF,CADc,CAFD,CAUf,MAAS,CACP,MAAS,GADF,CAEP,QAAW,GAFJ,CAVM,CAcf,KAAQ,eAdO,CAef,MAAS,QAfM,CAgBf,KAAQ,MAhBO,CAiBf,SAAY,EAjBG,CAkBf,QAAW,CACT,MAAS,CACP,OAAU,2CADH,CAEP,eAAgB,qDAFT,CAGP,cAAe,qDAHR,CAIP,YAAe,qDAJR,CADA,CAlBI,CAFJ,CA6BLC,CAAO,CAAGH,CAAM,CAACG,OA7BZ,CA+BXA,CAAO,CAACD,MAARC,CAAeD,CAAM,CAACC,OAAtBA,CA/BW,CAiCX,GAAIC,CAAAA,CAAO,CAAGJ,CAAM,CAACI,OAArB,CACC,CAAC,SAASC,CAAT,CAAmB,CAUvB,QAASC,CAAAA,CAAT,EAAyB,CACvBD,CAAQ,CAAC,SAASE,CAAT,CAAc,CACrB,MAAO,IAAIH,CAAAA,CAAJ,CAAY,SAASI,CAAT,CAA0B,CAC3CL,CAAO,CAAC,CAACI,CAAD,CAAD,CAAQ,SAASA,CAAT,CAAc,CAC3BC,CAAO,CAACD,CAAD,CADF,CAAA,CADF,CAAA,CADD,CAAA,CAOT,CAjBQH,CADc,CAOrBE,CAAa,EAPQ,CAErBH,CAAO,CAAC,CAAC,aAAD,CAAD,CAAkB,SAASI,CAAT,CAAc,CACrCH,CAAO,CAAGG,CAAG,CAACH,OADuB,CAErCE,CAAa,EAFR,CAAA,CAFN,CAAA,EAqBA,SAASH,CAAT,CAAkB,IACXM,CAAAA,CAAQ,CAAGT,CAAM,CAACS,QADP,CAGXC,CAAC,CAAI,UAAW,CACxB,GAAMA,CAAAA,CAAC,CAAGV,CAAM,CAACU,CAAPV,GAAaA,CAAM,CAACU,CAAPV,CAAW,EAAxBA,CAAV,CAEAU,CAAC,CAACC,GAAFD,CAAQE,IAAI,CAACD,GAALC,EAAY,UAAW,CAC7B,MAAO,CAAE,GAAIA,CAAAA,IADf,CAHwB,CAOxBF,CAAC,CAACP,OAAFO,CAAYP,CAPY,CAQxBO,CAAC,CAACN,OAAFM,CAAYN,CARY,CAUxB,GAAMS,CAAAA,CAAS,CAAGC,MAAM,CAACC,SAAPD,CAAiBE,QAAnC,CACAN,CAAC,CAACO,IAAFP,CAAS,SAASQ,CAAT,CAAc,CACrB,MAAOL,CAAAA,CAAS,CAACM,IAAVN,CAAeK,CAAfL,EAAoBO,KAApBP,CAA0B,CAA1BA,CAA6B,CAAC,CAA9BA,CADT,CAXwB,CAexB,GAAMQ,CAAAA,CAAM,CAAGC,KAAK,CAACP,SAANO,CAAgBF,KAA/B,CACAV,CAAC,CAACa,OAAFb,CAAYY,KAAK,CAACE,IAANF,EAAc,SAASJ,CAAT,CAAc,CACtC,MAAOG,CAAAA,CAAM,CAACF,IAAPE,CAAYH,CAAZG,CADT,CAhBwB,CAoBxBX,CAAC,CAACe,OAAFf,CAAYY,KAAK,CAACG,OAANH,EAAiB,SAASJ,CAAT,CAAc,CACzC,MAAuB,OAAhBR,GAAAA,CAAC,CAACO,IAAFP,CAAOQ,CAAPR,CADT,CApBwB,CAwBxBA,CAAC,CAACgB,WAAFhB,CAAgB,SAASQ,CAAT,CAAc,CAC5B,MAAOR,CAAAA,CAAC,CAACe,OAAFf,CAAUQ,CAAVR,GACJQ,CAAG,EAA2B,QAAvBR,GAAAA,CAAC,CAACO,IAAFP,CAAOQ,CAAG,CAACS,MAAXjB,CAAPQ,EAA0CU,QAAQ,CAACV,CAAG,CAACS,MAAL,CAAa,EAAb,CAARC,GAA6BV,CAAG,CAACS,MAFhF,CAxBwB,IA6BlBE,CAAAA,CAAQ,CAAGP,KAAK,CAACP,SAANO,CAAgBQ,OAAhBR,EAA2B,SAASS,CAAT,CAAa,CACvD,IAAK,GAAIC,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAG,KAAKL,MAAzB,CAAiCK,CAAC,EAAlC,CACED,CAAE,CAACZ,IAAHY,CAAQ,IAARA,CAAc,KAAKC,CAAL,CAAdD,CAAuBC,CAAvBD,CAA0B,IAA1BA,CAFJ,CA7BwB,CAmClBE,CAAU,CAAG,SAASf,CAAT,CAAca,CAAd,CAAkB,CACnC,IAAK,GAAIG,CAAAA,CAAT,GAAgBhB,CAAAA,CAAhB,CACMA,CAAG,CAACiB,cAAJjB,CAAmBgB,CAAnBhB,CADN,EAEIa,CAAE,CAACZ,IAAHY,CAAQb,CAARa,CAAab,CAAG,CAACgB,CAAD,CAAhBH,CAAuBG,CAAvBH,CAA4Bb,CAA5Ba,CAHN,CAnCwB,CA2CxBrB,CAAC,CAAC0B,KAAF1B,CAAUuB,CA3Cc,CA6CxBvB,CAAC,CAACoB,OAAFpB,CAAY,SAASQ,CAAT,CAAca,CAAd,CAAkB,CAC5B,CAACrB,CAAC,CAACgB,WAAFhB,CAAcQ,CAAdR,EAAqBmB,CAArBnB,CAAgCuB,CAAjC,EAA6Cd,IAA7C,CAAkDD,CAAlD,CAAuDa,CAAvD,CADF,CA7CwB,CAiDxB,GAAMM,CAAAA,CAAI,CAAGf,KAAK,CAACP,SAANO,CAAgBgB,GAAhBhB,EAAuB,SAASS,CAAT,CAAa,CAE/C,OADMQ,CAAAA,CAAG,CAAG,EACZ,CAASP,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAG,KAAKL,MAAzB,CAAiCK,CAAC,EAAlC,CACEO,CAAG,CAACP,CAAD,CAAHO,CAASR,CAAE,CAACZ,IAAHY,CAAQ,IAARA,CAAc,KAAKC,CAAL,CAAdD,CAAuBC,CAAvBD,CAA0B,IAA1BA,CAATQ,CAGF,MAAOA,CAAAA,CANT,CAAA,CASA7B,CAAC,CAAC4B,GAAF5B,CAAQ,SAASQ,CAAT,CAAca,CAAd,CAAkB,CACxB,MAAOM,CAAAA,CAAI,CAAClB,IAALkB,CAAUnB,CAAVmB,CAAeN,CAAfM,CADT,CA1DwB,CA8DxB,GAAMG,CAAAA,CAAO,CAAGlB,KAAK,CAACP,SAANO,CAAgBmB,MAAhBnB,EAA0B,SAASS,CAAT,CAAa,CAErD,OACMW,CAAAA,CADN,CADMC,CAAM,CAAG,EACf,CAASX,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAG,KAAKL,MAAzB,CAAiCK,CAAC,EAAlC,CACMU,CADN,CACeX,CAAE,CAACZ,IAAHY,CAAQ,IAARA,CAAc,KAAKC,CAAL,CAAdD,CAAuBC,CAAvBD,CAA0B,IAA1BA,CADf,CAEMW,CAFN,EAGIC,CAAM,CAACC,IAAPD,CAAY,KAAKX,CAAL,CAAZW,CAHJ,CAMA,MAAOA,CAAAA,CART,CAAA,CAWAjC,CAAC,CAAC+B,MAAF/B,CAAW,SAASQ,CAAT,CAAca,CAAd,CAAkB,CAC3B,MAAOS,CAAAA,CAAO,CAACrB,IAARqB,CAAatB,CAAbsB,CAAkBT,CAAlBS,CADT,CAzEwB,CA6ExB9B,CAAC,CAACmC,MAAFnC,CAAWI,MAAM,CAAC+B,MAAP/B,EAAiB,SAASgC,CAAT,CAAiB,CAO3C,MANApC,CAAAA,CAAC,CAACoB,OAAFpB,CAAUW,CAAM,CAACF,IAAPE,CAAY0B,SAAZ1B,CAAuB,CAAvBA,CAAVX,CAAqC,SAASsC,CAAT,CAAiB,CACpDtC,CAAC,CAACoB,OAAFpB,CAAUsC,CAAVtC,CAAkB,SAASuC,CAAT,CAAgBf,CAAhB,CAAqB,CACrCY,CAAM,CAACZ,CAAD,CAANY,CAAcG,CADhB,CAAAvC,CADF,CAAAA,CAMA,CAAOoC,CAPT,CA7EwB,CAuFxBpC,CAAC,CAACwC,IAAFxC,CAAU,UAAW,CAwBnB,MAAO,CACLyC,KAAK,CAxBP,SAAmBD,CAAnB,CAAyB,CACvBA,CAAI,CAAGA,CAAI,CAAC9B,KAAL8B,CAAW,CAAXA,CADgB,CAKvB,OAHME,CAAAA,CAAM,CAAGF,CAAI,CAAGA,CAAI,CAACG,KAALH,CAAW,GAAXA,CAAH,CAAqB,EAGxC,CAFMI,CAAI,CAAG,EAEb,CAAStB,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGoB,CAAM,CAACzB,MAA3B,CAAmCK,CAAC,EAAI,CAAxC,CACEsB,CAAI,CAACC,kBAAkB,CAACH,CAAM,CAACpB,CAAD,CAAP,CAAnB,CAAJsB,CAAsCC,kBAAkB,CACtDH,CAAM,CAACpB,CAAC,CAAG,CAAL,CAANoB,EAAiB,EADqC,CAAxDE,CAKF,MAAOA,CAAAA,CACR,CAWM,CAELE,KAAK,CAXP,SAAkBF,CAAlB,CAAwB,CACtB,GAAMJ,CAAAA,CAAI,CAAG,EAAb,CAKA,MAJAjB,CAAAA,CAAU,CAACqB,CAAD,CAAO,SAASL,CAAT,CAAgBf,CAAhB,CAAqB,CACpCgB,CAAI,CAACN,IAALM,CAAUO,kBAAkB,CAACvB,CAAD,CAAlBuB,CAA0B,GAA1BA,CAAgCA,kBAAkB,CAACR,CAAD,CAA5DC,CADQ,CAAA,CAIV,CAAO,KAAOA,CAAI,CAACQ,IAALR,GAAYS,IAAZT,CAAiB,GAAjBA,CACf,CAEM,CAxBA,CAAC,EAvFc,CAqHxBxC,CAAC,CAACkD,MAAFlD,CAAY,UAAW,CAUrB,MAAO,CACL8C,KAAK,CAVP,SAAoBF,CAApB,CAA0B,CACxB,GAAMM,CAAAA,CAAM,CAAG,EAAf,CAKA,MAJA3B,CAAAA,CAAU,CAACqB,CAAD,CAAO,SAASL,CAAT,CAAgBf,CAAhB,CAAqB,CACpC0B,CAAM,CAAChB,IAAPgB,CAAYH,kBAAkB,CAACvB,CAAD,CAAlBuB,CAA0B,GAA1BA,CAAgCA,kBAAkB,CAACR,CAAD,CAA9DW,CADQ,CAAA,CAIV,CAAOA,CAAM,CAACD,IAAPC,CAAY,GAAZA,CACR,CAEM,CAVE,CAAC,EArHY,CA4JxBlD,CAAC,CAACmD,WAAFnD,CAAiB,UAAW,CAa1B,MAAO,CACLoD,OAAO,CAbT,SAAiB5B,CAAjB,CAAsBe,CAAtB,CAA6B,CAC3B,MAAO9C,CAAAA,CAAO,CAAC,aAAD,CAAPA,CAAuB4D,IAAvB5D,CAA4B,SAAS0D,CAAT,CAAsB,CACvD,MAAOA,CAAAA,CAAW,CAACC,OAAZD,CAAoB1C,IAApB0C,CAAyBA,CAAzBA,CAAsC3B,CAAtC2B,CAA2CZ,CAA3CY,CADF,CAAA1D,CAGR,CAQM,CAEL6D,OAAO,CART,SAAiB9B,CAAjB,CAAsB,CACpB,MAAO/B,CAAAA,CAAO,CAAC,aAAD,CAAPA,CAAuB4D,IAAvB5D,CAA4B,SAAS0D,CAAT,CAAsB,CACvD,MAAOA,CAAAA,CAAW,CAACG,OAAZH,CAAoB1C,IAApB0C,CAAyBA,CAAzBA,CAAsC3B,CAAtC2B,CADF,CAAA1D,CAGR,CAEM,CAbO,CAAC,EA5JO,CA+KxBO,CAAC,CAACuD,QAAFvD,CAAa,SAASwD,CAAT,CAAeC,CAAf,CAAwB,CACnC,MAAO/D,CAAAA,CAAO,CAACgE,GAARhE,CAAY,CAACD,CAAO,CAAC,QAAD,CAAR,CAAoBA,CAAO,CAAC,cAAD,CAA3B,CAAZC,EAA0D2D,IAA1D3D,CAA+D,SAASiE,CAAT,CAAe,IAC7EC,CAAAA,CAAM,CAAGD,CAAI,CAAC,CAAD,CADgE,CAE7EE,CAAS,CAAGF,CAAI,CAAC,CAAD,CAF6D,CAanF,MAVAC,CAAAA,CAAM,CAACE,UAAPF,CAAkB,CAChBC,SAAS,CAAE,SAASL,CAAT,CAAeO,CAAf,CAAqB,OAC1BA,CAAAA,CAAI,EAAIF,CAAS,CAACG,WAAVH,CAAsBE,CAAtBF,CADkB,CAErBA,CAAS,CAACA,SAAVA,CAAoBE,CAApBF,CAA0BL,CAA1BK,EAAgCtB,KAFX,CAIrBsB,CAAS,CAACI,aAAVJ,CAAwBL,CAAxBK,EAA8BtB,KAExC,CAPe,CAAlBqB,CAUA,CAAOA,CAAM,CAACJ,CAAD,CAAOC,CAAP,CAbR,CAAA/D,CADT,CA/KwB,IAiMlBwE,CAAAA,CAAc,CAAG,CACrB,IAAK,OADgB,CAErB,IAAK,MAFgB,CAGrB,IAAK,MAHgB,CAIrB,IAAK,QAJgB,CAKrB,IAAK,OALgB,CAMrB,IAAK,OANgB,CAjMC,CAyMlBC,CAAe,CAAG,WAzMA,CAgNxB,MANAnE,CAAAA,CAAC,CAACoE,MAAFpE,CAAW,SAASqE,CAAT,CAAY,CACrB,MAAO,CAACA,CAAC,CAAG,EAAL,EAASC,OAAT,CAAiBH,CAAjB,CAAkC,SAASI,CAAT,CAAY,CACnD,MAAOL,CAAAA,CAAc,CAACK,CAAD,CADhB,CAAA,CADT,CAMA,CAAOvE,CAhNK,CAAC,EAHM,CA6NXwE,CAAS,CAAGjF,QAAQ,CAAC,QAAD,CAAW,q9DAAX,CAARA,CAA0+DC,CAA1+DD,CA7ND,CA+NXkF,CAAM,CAAI,UAAW,CA0B7B,QAASC,CAAAA,CAAT,CAAkBC,CAAlB,CAAyB,CACvB,MAAO,CACLA,KAAK,CAAEA,CADF,CAELC,SAAS,CAAED,CAAK,QAFX,CAGLE,KAAK,CAAE,CAHF,CAKR,CAED,QAASC,CAAAA,CAAT,EAAoB,CAClB,MAAO,CAACC,IAAI,CAACC,MAALD,GAAgB/E,CAAC,CAACC,GAAFD,EAAjB,EACJM,QADI,CACK,EADL,EAEJgE,OAFI,CAEI,GAFJ,CAES,EAFT,EAGJ5D,KAHI,CAGE,CAHF,CAGK,CAHL,CAIR,CAED,QAASuE,CAAAA,CAAT,CAAiBC,CAAjB,CAAuBC,CAAvB,CAA+BR,CAA/B,CAAsC,CAepC,QAASS,CAAAA,CAAT,EAAc,CACZC,CAAI,CAACC,WAALD,CAAiBE,CAAjBF,CADY,CAEZG,MAAM,CAACC,CAAD,CAAND,CAAuB,IACxB,CAjBDb,CAAK,CAAGA,CAAK,EAAI,EADmB,IAE9Bc,CAAAA,CAAY,CAAG,SAAWX,CAAQ,EAFJ,CAG9BS,CAAM,CAAGxF,CAAQ,CAAC2F,aAAT3F,CAAuB,QAAvBA,CAHqB,CAoBpC,MAhBAoF,CAAAA,CAAM,CAAGnF,CAAC,CAACmC,MAAFnC,CAAS,EAATA,CAAamF,CAAbnF,CAAqB,CAC5BL,QAAQ,CAAE8F,CADkB,CAArBzF,CAgBT,CAZI2E,CAAK,CAACA,KAYV,GAXEQ,CAAM,CAACQ,YAAPR,CAAsBR,CAAK,CAACA,KAW9B,EARAY,CAAM,CAACK,GAAPL,CAAaM,CAAsB,CAAGX,CAAzBW,CAAgC,GAAhCA,CAAsC7F,CAAC,CAACkD,MAAFlD,CAAS8C,KAAT9C,CAAemF,CAAfnF,CAQnD,CAPAqF,CAAI,CAACS,WAALT,CAAiBE,CAAjBF,CAOA,CAAO,GAAI3F,CAAAA,CAAJ,CAAY,SAASI,CAAT,CAAkBiG,CAAlB,CAA0B,CAC3CP,MAAM,CAACC,CAAD,CAAND,CAAuB,SAASQ,CAAT,CAAmB,CACxClG,CAAO,CAACkG,CAAD,CADiC,CAExCZ,CAAE,EAFJ,CAD2C,CAK3CG,CAAM,CAACU,OAAPV,CAAiB,SAASW,CAAT,CAAc,CAC7BH,CAAM,CAACG,CAAD,CADuB,CAE7Bd,CAAE,EAFJ,CALK,CAAA,EASJ/B,IATI,CASC,SAAST,CAAT,CAAe,CACrB,MAAOuD,CAAAA,CAAc,CAACvD,CAAD,CAAO+B,CAAP,CAVhB,CAAA,CAYR,CAED,QAASwB,CAAAA,CAAT,CAAwBH,CAAxB,CAAkCrB,CAAlC,CAAyC,CACvC,GAAI,CAACqB,CAAD,EAAa,CAACA,CAAQ,CAACpD,IAA3B,CACE,MAAOlD,CAAAA,CAAO,CAACqG,MAARrG,CAAe,gBAAfA,CAAP,CAGF,GAAIsG,CAAQ,CAACpD,IAAToD,CAAcI,OAAlB,CACE,MAAO1G,CAAAA,CAAO,CAACqG,MAARrG,CAAesG,CAAQ,CAACpD,IAAToD,CAAcI,OAA7B1G,CAAP,CAGF,GAAM2G,CAAAA,CAAI,CAAGL,CAAQ,CAACK,IAAtB,CACA,GAAIA,CAAJ,CAAU,IACFzB,CAAAA,CAAS,CAAGyB,CAAI,CAAC,uBAAD,CADd,CAEFxB,CAAK,CAAGwB,CAAI,CAAC,mBAAD,CAFV,CAIJzB,CAJI,GAKND,CAAK,CAACC,SAAND,CAAkBzD,QAAQ,CAAC0D,CAAD,CAAY,EAAZ,CALpB,EAQJC,CARI,GASNF,CAAK,CAACE,KAANF,CAAwC,GAA1BzD,CAAAA,QAAQ,CAAC0D,CAAD,CAAY,EAAZ,CAThB,CAWT,CAED,MAAOoB,CAAAA,CACR,CAED,QAASM,CAAAA,CAAT,CAA6B3B,CAA7B,CAAoC,CAOlC,MANI,CAACA,CAAK,CAACC,SAMX,EALM5E,QAAAA,CAAC,CAACC,GAAFD,GAAUuG,CAAc,CAACC,IAK/B,GAJI7B,CAAK,CAACC,SAAND,KAIJ,EAAOA,CACR,CAED,QAAS8B,CAAAA,CAAT,EAAoB,CAElB,MADAzG,CAAAA,CAAC,CAACoB,OAAFpB,CAAU0G,CAAV1G,CAAkBsG,CAAlBtG,CACA,CAAOA,CAAC,CAAC+B,MAAF/B,CAAS0G,CAAT1G,CAAiB,SAAS2E,CAAT,CAAgB,CACtC,MAAOA,CAAAA,CAAK,CAACC,SADR,CAAA5E,EAEJ,CAFIA,CAGR,CAED,QAAS2G,CAAAA,CAAT,CAA0BzB,CAA1B,CAAgCC,CAAhC,CAAwC,CACtC,GAAMR,CAAAA,CAAK,CAAG8B,CAAQ,EAAtB,CAEA,MAAO9B,CAAAA,CAAK,CACRM,CAAO,CAACC,CAAD,CAAOC,CAAP,CAAeR,CAAf,CADC,CAERjF,CAAO,CAACqG,MAARrG,CAAe,UAAfA,CACL,CA5H4B,GACvB2F,CAAAA,CAAI,CAAGtF,CAAQ,CAACsF,IAATtF,EAAiBA,CAAQ,CAAC6G,oBAAT7G,CAA8B,MAA9BA,EAAsC,CAAtCA,CADD,CAKvBwG,CAAc,CAAG7B,CAAQ,CAAC,EAAD,CALF,CAMvBgC,CAAM,CAAG1G,CAAC,CAAC4B,GAAF5B,CAAMR,CAAM,CAACqH,YAAb7G,CAA2B,SAAS2E,CAAT,CAAgB,CAKxD,MAJI3E,CAAAA,CAAC,CAACe,OAAFf,CAAU2E,CAAV3E,CAIJ,GAHE2E,CAAK,CAAGA,CAAK,CAAC1B,IAAN0B,CAAW,EAAXA,CAGV,EAAOD,CAAQ,CAACC,CAAD,CALF,CAAA3E,CANc,CAcvB6F,CAAsB,CAAI,UAAW,CACzC,GAAIiB,CAAAA,CAAG,CAAG,CAACtH,CAAM,CAACuH,GAAR,CAAV,CAQA,MANED,CAAAA,CAMF,CAPItH,CAAM,CAACwH,MAOX,CANQF,CAAG,CAACG,MAAJH,CAAW,CAAC,cAAD,CAAiBtH,CAAM,CAACwH,MAAxB,CAAXF,CAMR,CAJQA,CAAG,CAACG,MAAJH,CAAW,CAAC,OAAD,CAAUtH,CAAM,CAAC0H,KAAjB,CAAwB1H,CAAM,CAAC2H,IAA/B,CAAXL,CAIR,CAFAA,CAAG,CAAC5E,IAAJ4E,CAAS,QAATA,CAEA,CAAOA,CAAG,CAAC7D,IAAJ6D,CAAS,GAATA,CATsB,CAAC,EAdH,CA0I7B,MAAO,CACLM,GAAG,CAbL,SAAalC,CAAb,CAAmBC,CAAnB,CAA2B,OACzBmB,CAAAA,CAAmB,CAACC,CAAD,CADM,CAGrBA,CAAc,CAAC3B,SAHM,CAIhBK,CAAO,CAACC,CAAD,CAAOC,CAAP,CAAeoB,CAAf,CAAPtB,CAAsCoC,KAAtCpC,CAA4C,UAAW,CAC5D,MAAO0B,CAAAA,CAAgB,CAACzB,CAAD,CAAOC,CAAP,CADlB,CAAAF,CAJgB,CAQhB0B,CAAgB,CAACzB,CAAD,CAAOC,CAAP,CAE1B,CAEM,CA1IU,CAAC,EA/NC,CA8WXmC,CAAK,CAAI,UAAW,CAK5B,QAASC,CAAAA,CAAT,CAAgBC,CAAhB,CAAsB,OACfC,CAAAA,CADe,CAIbzH,CAAC,CAACmD,WAAFnD,CAAcsD,OAAdtD,UAAyCqD,IAAzCrD,CAA8C,SAASuH,CAAT,CAAiB,CACpE,GAAKA,CAAD,EAAWA,CAAM,CAACG,QAAPH,GAAoB/H,CAAM,CAACkI,QAA1C,EAGA,GAAI9E,CAAAA,CAAI,CAAG2E,CAAM,CAACI,KAAPJ,CAAaC,CAAI,CAAG,CAApBD,CAAX,CAHA,MAIK3E,CAAAA,CAAD,EAAUA,CAAI,CAACgF,IAAf,IAAuB5H,CAAC,CAACC,GAAFD,GAAU4C,CAAI,CAACgF,IAAf5H,CAAsByH,CAA7C,CAJJ,CAOO7E,CAPP,QADK,CAAA5C,CAJa,OAcrB,CAED,QAAS6H,CAAAA,CAAT,CAAeL,CAAf,CAAqB,CACnB,MAAO/C,CAAAA,CAAM,CACV2C,GADI3C,CACA,EADAA,CACI,CACP+C,IAAI,CAAEA,CADC,CAEPM,QAAQ,CAAEtI,CAAM,CAACkI,QAFV,CADJjD,EAKJpB,IALIoB,CAKC,SAAS7B,CAAT,CAAe,CAEnB,MADAmF,CAAAA,CAAO,CAACnF,CAAD,CAAO4E,CAAP,CACP,CAAO5E,CAPJ,CAAA6B,CASR,CAED,QAASsD,CAAAA,CAAT,CAAiBnF,CAAjB,CAAuB4E,CAAvB,CAA6B,OAC3BQ,CAAAA,CAAO,CAACD,OAARC,CAAgB,CACdpF,IAAI,CAAEA,CAAI,CAACA,IADG,CAAhBoF,CAD2B,CAKtBP,CALsB,CAQpBzH,CAAC,CAACmD,WAAFnD,CACJsD,OADItD,UAEJqD,IAFIrD,CAEC,SAASuH,CAAT,CAAiB,CA2BrB,MA1BKA,CAAAA,CAAD,EAAWA,CAAM,CAACG,QAAPH,GAAoB/H,CAAM,CAACkI,QA0B1C,GAzBEH,CAAM,CAAG,CACPI,KAAK,CAAE,EADA,CAEPD,QAAQ,CAAElI,CAAM,CAACkI,QAFV,CAyBX,EAnBAH,CAAM,CAACI,KAAPJ,CAAaC,CAAI,CAAG,CAApBD,EAAyB,CACvBlB,IAAI,CAAE,CACJ4B,IAAI,CAAErF,CAAI,CAACyD,IAALzD,CAAUqF,IADZ,CAEJC,IAAI,CAAEtF,CAAI,CAACyD,IAALzD,CAAUsF,IAFZ,CADiB,CAKvBN,IAAI,CAAE5H,CAAC,CAACC,GAAFD,EALiB,CAMvB4C,IAAI,CAAE,EANiB,CAmBzB,CAVA2E,CAAM,CAACI,KAAPJ,CAAaC,CAAI,CAAG,CAApBD,EAAuB3E,IAAvB2E,CAA8B3E,CAAI,CAACA,IAALA,CAAUhB,GAAVgB,CAAc,SAASuF,CAAT,CAAe,CACzD,MAAO,CACLC,UAAU,CAAED,CAAI,CAACC,UADZ,CAELC,KAAK,CAAEF,CAAI,CAACE,KAFP,CAGLC,MAAM,CAAEH,CAAI,CAACG,MAHR,CADqB,CAAA1F,CAU9B,CAFA2E,CAAM,CAACK,IAAPL,CAAcvH,CAAC,CAACC,GAAFD,EAEd,CAAOuH,CA7BJ,CAAAvH,EA+BJqD,IA/BIrD,CA+BC,SAASuH,CAAT,CAAiB,CACrB,MAAOvH,CAAAA,CAAC,CAACmD,WAAFnD,CAAcoD,OAAdpD,SAAyCuH,CAAzCvH,CAhCJ,CAAAA,EAkCJqD,IAlCIrD,CAkCC,UAAW,CACf,MAAO4C,CAAAA,CAnCJ,CAAA5C,CARoB,CAMlB4C,CAuCV,CAED,QAASwE,CAAAA,CAAT,CAAaI,CAAb,CAAmB,CAMjB,MALAA,CAAAA,CAAI,CAAGtG,QAAQ,CAACsG,CAAD,CAAO,EAAP,CAARtG,EAAsB,CAK7B,CAJW,CAAPsG,CAAAA,CAIJ,GAHEA,CAAI,CAAG,CAGT,EAAO9H,CAAO,CAACI,OAARJ,GACJ2D,IADI3D,CACC,UAAW,CACf,MAAO6H,CAAAA,CAAM,CAACC,CAAD,CAFV,CAAA9H,EAIJ2D,IAJI3D,CAIC,SAASkD,CAAT,CAAe,CACnB,MAAOA,CAAAA,CAAI,CAAGA,CAAH,CAAUiF,CAAK,CAACL,CAAD,CALvB,CAAA9H,CAOR,CA7F2B,GAEtB+H,CAAAA,CAAU,CAAiD,GAA9C,EAAEjI,CAAM,CAAC+I,KAAP/I,EAAgBA,CAAM,CAAC+I,KAAP/I,CAAa8H,KAA7B9H,EAAuC,CAAzC,CAFS,CAGtBgJ,CAAM,CAAGhE,CAAS,CAAC8C,KAHG,CA+F5B,MAAO,CACLF,GAAG,CAAEA,CADA,CAELW,OAAO,CAAEA,CAFJ,CAGLS,MAAM,CAAEA,CAHH,CA/FS,CAAC,EA9WE,CAodXR,CAAO,CAAI,UAAW,CAK9B,QAAST,CAAAA,CAAT,CAAgBkB,CAAhB,CAAoB,OACbhB,CAAAA,CADa,CAKXzH,CAAC,CAACmD,WAAFnD,CAAcsD,OAAdtD,aAA4CqD,IAA5CrD,CAAiD,SAASuH,CAAT,CAAiB,CACvE,GAAM3E,CAAAA,CAAI,CAAG2E,CAAM,EAAIA,CAAM,CAACkB,CAAD,CAA7B,CADuE,MAElE7F,CAAAA,CAAD,EAAUA,CAAI,CAACgF,IAAf,IAAuB5H,CAAC,CAACC,GAAFD,GAAU4C,CAAI,CAACgF,IAAf5H,CAAsByH,CAA7C,CAFmE,CAKhE7E,CALgE,OAAlE,CAAA5C,CALW,OAYnB,CAED,QAAS6H,CAAAA,CAAT,CAAeY,CAAf,CAAmB,CACjB,MAAOhE,CAAAA,CAAM,CAAC2C,GAAP3C,CAAW,IAAMgE,CAAjBhE,EAAqBpB,IAArBoB,CAA0B,SAAS7B,CAAT,CAAe,CAE9C,MADAmF,CAAAA,CAAO,CAACnF,CAAD,CACP,CAAOA,CAFF,CAAA6B,CAIR,CAED,QAASsD,CAAAA,CAAT,CAAiBnF,CAAjB,CAAuB,OAChB6E,CAAAA,CADgB,CAKdzH,CAAC,CAACmD,WAAFnD,CACJsD,OADItD,aAEJqD,IAFIrD,CAEC,SAASuH,CAAT,CAAiB,CAyBrB,MAxBAA,CAAAA,CAAM,CAAGA,CAAM,EAAI,EAwBnB,CAtBI3E,CAAI,CAACA,IAALA,CAAUxB,OAsBd,CArBEwB,CAAI,CAACA,IAALA,CAAUxB,OAAVwB,CAAkB,SAASuF,CAAT,CAAe,CAC/BZ,CAAM,CAACY,CAAI,CAACG,MAAN,CAANf,CAAsB,CACpB3E,IAAI,CAAEuF,CADc,CAEpBM,EAAE,CAAEN,CAAI,CAACG,MAFW,CAGpBV,IAAI,CAAE5H,CAAC,CAACC,GAAFD,EAHc,CAIpBqG,IAAI,CAAE,CACJ6B,IAAI,CAAEtF,CAAI,CAACyD,IAALzD,EAAaA,CAAI,CAACyD,IAALzD,CAAUsF,IADzB,CAJc,CADxB,CAAAtF,CAqBF,CAVE2E,CAAM,CAAC3E,CAAI,CAACA,IAALA,CAAU0F,MAAX,CAANf,CAA2B,CACzB3E,IAAI,CAAEA,CAAI,CAACA,IADc,CAEzB6F,EAAE,CAAE7F,CAAI,CAACA,IAALA,CAAU0F,MAFW,CAGzBV,IAAI,CAAE5H,CAAC,CAACC,GAAFD,EAHmB,CAIzBqG,IAAI,CAAE,CACJ6B,IAAI,CAAEtF,CAAI,CAACyD,IAALzD,EAAaA,CAAI,CAACyD,IAALzD,CAAUsF,IADzB,CAJmB,CAU7B,CAAOX,CA3BJ,CAAAvH,EA6BJqD,IA7BIrD,CA6BC,SAASuH,CAAT,CAAiB,CACrB,MAAOvH,CAAAA,CAAC,CAACmD,WAAFnD,CAAcoD,OAAdpD,YAA4CuH,CAA5CvH,CA9BJ,CAAAA,EAgCJqD,IAhCIrD,CAgCC,UAAW,CACf,MAAO4C,CAAAA,CAjCJ,CAAA5C,CALc,CAEZ4C,CAsCV,CAED,QAASwE,CAAAA,CAAT,CAAaqB,CAAb,CAAiB,CAGf,MAFAA,CAAAA,CAAE,CAAG,CAACA,CAEN,CAAO/I,CAAO,CAACI,OAARJ,GACJ2D,IADI3D,CACC,UAAW,CACf,MAAO6H,CAAAA,CAAM,CAACkB,CAAD,CAFV,CAAA/I,EAIJ2D,IAJI3D,CAIC,SAASkD,CAAT,CAAe,CACnB,MAAOA,CAAAA,CAAI,CAAGA,CAAH,CAAUiF,CAAK,CAACY,CAAD,CALvB,CAAA/I,EAOJ2D,IAPI3D,CAOC,SAASkD,CAAT,CAAe,CACnB,MAAO5C,CAAAA,CAAC,CAACuD,QAAFvD,CAAW4C,CAAI,CAACA,IAALA,CAAU8F,IAArB1I,EAA2BqD,IAA3BrD,CAAgC,SAAS2I,CAAT,CAAe,CAEpD,MADA/F,CAAAA,CAAI,CAACA,IAALA,CAAU+F,IAAV/F,CAAiB+F,CACjB,CAAO/F,CAFF,CAAA5C,CARJ,CAAAN,CAaR,CApF6B,GAExB+H,CAAAA,CAAU,CAAmD,GAAhD,EAAEjI,CAAM,CAAC+I,KAAP/I,EAAgBA,CAAM,CAAC+I,KAAP/I,CAAawI,OAA7BxI,EAAyC,CAA3C,CAFW,CAGxBgJ,CAAM,CAAGhE,CAAS,CAACwD,OAHK,CAsF9B,MAAO,CACLZ,GAAG,CAAEA,CADA,CAELW,OAAO,CAAEA,CAFJ,CAGLS,MAAM,CAAEA,CAHH,CAtFW,CAAC,EApdA,CAijBXI,CAAG,CAAI,UAAW,CAG1B,QAASC,CAAAA,CAAT,CAAkBF,CAAlB,CAAwB,CACtBG,CAAS,CAACC,SAAVD,CAAsBH,CACvB,CAED,QAASK,CAAAA,CAAT,CAAmB9C,CAAnB,CAAwB,CACtB+C,OAAO,CAACC,KAARD,CAAc/C,CAAd+C,CADsB,CAEtBH,CAAS,CAACC,SAAVD,CACE,oEACH,CAED,QAASK,CAAAA,CAAT,CAAmB3B,CAAnB,CAAyB,CAEvB,MADAzH,CAAAA,CAAQ,CAACsI,KAATtI,CAAiBP,CAAM,CAAC4J,IACxB,CAAO9B,CAAK,CAACF,GAANE,CAAUE,CAAVF,EAAgBjE,IAAhBiE,CAAqBA,CAAK,CAACkB,MAA3BlB,CACR,CAED,QAAS+B,CAAAA,CAAT,CAAqBZ,CAArB,CAAyB,CACvB,MAAOT,CAAAA,CAAO,CAACZ,GAARY,CAAYS,CAAZT,EAAgB3E,IAAhB2E,CAAqB,SAASpF,CAAT,CAAc,CAExC,MADA7C,CAAAA,CAAQ,CAACsI,KAATtI,CAAiB6C,CAAI,CAACA,IAALA,CAAUyF,KAC3B,CAAOzF,CAFF,CAAAoF,EAGJ3E,IAHI2E,CAGCA,CAAO,CAACQ,MAHTR,CAIR,CAED,QAASsB,CAAAA,CAAT,EAAuB,CACrBR,CAAS,CAACC,SAAVD,CAAsB,YACvB,CAED,QAASS,CAAAA,CAAT,EAAoB,CAElB,GAAMC,CAAAA,CAAK,CAAGxJ,CAAC,CAACwC,IAAFxC,CAAOyC,KAAPzC,CAAawF,MAAM,CAACiE,QAAPjE,CAAgBhD,IAA7BxC,CAAd,CACAsJ,CAAW,EAHO,CAIlB,GAAII,CAAAA,CAAJ,CAEA,GAAIF,CAAK,CAACf,EAAV,CACEiB,CAAO,CAAGL,CAAW,CAACG,CAAK,CAACf,EAAP,CADvB,MAEO,GAAGe,CAAK,CAACG,KAAT,CAGL,MAFAC,CAAAA,KAAK,CAAC,4CAAD,CAEL,KADApE,CAAAA,MAAM,CAACqE,OAAPrE,CAAesE,EAAftE,CAAkB,CAAC,CAAnBA,CACA,CAEAkE,CAAO,CAAGP,CAAS,CAACK,CAAK,CAAChC,IAAP,CAPrB,CAUA,MAAOkC,CAAAA,CAAO,CAACrG,IAARqG,CAAab,CAAba,EAAuBrC,KAAvBqC,CAA6BV,CAA7BU,CACR,CA7CD,GAAIZ,CAAAA,CAAS,CAAG/I,CAAQ,CAACgK,cAAThK,CAAwB,QAAxBA,CAAhB,CAoDA,MAAO,CACLiK,GAAG,CANL,UAAe,CACbT,CAAQ,EADK,CAEb/D,MAAM,CAACyE,gBAAPzE,CAAwB,YAAxBA,CAAsC+D,CAAtC/D,IACD,CAEM,CArDO,CAAC,EAjjBI,CA4mBjBoD,CAAG,CAACoB,GAAJpB,EAjoBD,CAAA,CAlCF,CAAA,G","file":"../app.js","sourcesContent":["\n;(function() {\n  const global = Function('return this')()\n  const config = {\n  \"api\": \"//api.github.com\",\n  \"accessTokens\": [\n    [\n      \"5\",\n      \"a41e75c8b2\",\n      \"2c70d70b08ae21\",\n      \"5cd774758e3b8b0\"\n    ]\n  ],\n  \"cache\": {\n    \"index\": 5000,\n    \"article\": 60000\n  },\n  \"name\": \"fisker's blog\",\n  \"owner\": \"fisker\",\n  \"repo\": \"blog\",\n  \"pageSize\": 30,\n  \"require\": {\n    \"paths\": {\n      \"marked\": \"//cdn.bootcss.com/marked/0.4.0/marked.min\",\n      \"highlight-js\": \"//cdn.bootcss.com/highlight.js/9.12.0/highlight.min\",\n      \"es6-promise\": \"//cdn.bootcss.com/es6-promise/4.1.1/es6-promise.min\",\n      \"localforage\": \"//cdn.bootcss.com/localforage/1.7.1/localforage.min\"\n    }\n  }\n}\n  const require = global.require\n\n  require.config(config.require)\n\n  let Promise = global.Promise\n  ;(function(callback) {\n    if (!Promise) {\n  require(['es6-promise'], function(mod) {\n    Promise = mod.Promise\n    afterPromised()\n  })\n} else {\n  afterPromised()\n}\n\nfunction afterPromised() {\n  callback(function(mod) {\n    return new Promise(function(resolve, reject) {\n      require([mod], function(mod) {\n        resolve(mod)\n      })\n    })\n  })\n}\n\n  })\n  (function(require) {\n    const document = global.document\n\n    const _ = (function() {\n  const _ = global._ || (global._ = {})\n\n  _.now = Date.now || function() {\n    return + new Date()\n  }\n\n  _.require = require\n  _.Promise = Promise\n\n  const _toString = Object.prototype.toString\n  _.type = function(obj) {\n    return _toString.call(obj).slice(7, -1)\n  }\n\n  const _slice = Array.prototype.slice\n  _.toArray = Array.from || function(obj) {\n    return _slice.call(obj)\n  }\n\n  _.isArray = Array.isArray || function(obj) {\n    return _.type(obj) === 'Array'\n  }\n\n  _.isArrayLike = function(obj) {\n    return _.isArray(obj) ||\n      (obj && _.type(obj.length) === 'Number' && parseInt(obj.length, 10) === obj.length)\n  }\n\n  const _forEach = Array.prototype.forEach || function(fn) {\n    for (let i = 0; i < this.length; i++) {\n      fn.call(this, this[i], i, this)\n    }\n  }\n\n  const _forInEach = function(obj, fn) {\n    for (let key in obj) {\n      if (obj.hasOwnProperty(key)) {\n        fn.call(obj, obj[key], key, obj)\n      }\n    }\n  }\n\n  _.forIn = _forInEach\n\n  _.forEach = function(obj, fn) {\n    (_.isArrayLike(obj) ? _forEach : _forInEach).call(obj, fn)\n  }\n\n  const _map = Array.prototype.map || function(fn) {\n    const arr = []\n    for (let i = 0; i < this.length; i++) {\n      arr[i] = fn.call(this, this[i], i, this)\n    }\n\n    return arr\n  }\n\n  _.map = function(obj, fn) {\n    return _map.call(obj, fn)\n  }\n\n  const _filter = Array.prototype.filter || function(fn) {\n    const filted = []\n    for (let i = 0; i < this.length; i++) {\n      let result = fn.call(this, this[i], i, this)\n      if (result) {\n        filted.push(this[i])\n      }\n    }\n    return filted\n  }\n\n  _.filter = function(obj, fn) {\n    return _filter.call(obj, fn)\n  }\n\n  _.assign = Object.assign || function(target) {\n    _.forEach(_slice.call(arguments, 1), function(source) {\n      _.forEach(source, function(value, key) {\n        target[key] = value\n      })\n    })\n\n    return target\n  }\n\n  _.hash = (function() {\n    function parseHash(hash) {\n      hash = hash.slice(2)\n      const pieces = hash ? hash.split('/') : []\n      const data = {}\n\n      for (let i = 0; i < pieces.length; i += 2) {\n        data[decodeURIComponent(pieces[i])] = decodeURIComponent(\n          pieces[i + 1] || ''\n        )\n      }\n\n      return data\n    }\n\n    function hashLink(data) {\n      const hash = []\n      _forInEach(data, function(value, key) {\n        hash.push(encodeURIComponent(key) + '/' + encodeURIComponent(value))\n      })\n\n      return '#/' + hash.sort().join('/')\n    }\n\n    return {\n      parse: parseHash,\n      build: hashLink\n    }\n  })()\n\n  _.search = (function() {\n    function buildQuery(data) {\n      const search = []\n      _forInEach(data, function(value, key) {\n        search.push(encodeURIComponent(key) + '=' + encodeURIComponent(value))\n      })\n\n      return search.join('&')\n    }\n\n    return {\n      build: buildQuery\n    }\n  })()\n\n  // const templateCompiled = {}\n  // const templateOptions = {\n  //   _: _,\n  //   config: config\n  // }\n\n  // _.template = (function(template) {\n  //   if (templateCompiled[template]) {\n  //     return templateCompiled[template]\n  //   }\n  //   return require('lodash.template')\n  //     .then(function(engine) {\n  //       return templateCompiled[template] = engine(template, templateOptions)\n  //     })\n  // })\n\n  // _.render = function(template) {\n  //   return function(data) {\n  //     return Promise.resolve(_.template(template)).then(function(compiled) {\n  //       return compiled(data)\n  //     })\n  //   }\n  // }\n\n  _.localforage = (function() {\n    function setItem(key, value) {\n      return require('localforage').then(function(localforage) {\n        return localforage.setItem.call(localforage, key, value)\n      })\n    }\n\n    function getItem(key) {\n      return require('localforage').then(function(localforage) {\n        return localforage.getItem.call(localforage, key)\n      })\n    }\n\n    return {\n      setItem: setItem,\n      getItem: getItem\n    }\n  })()\n\n  _.markdown = function(code, options) {\n    return Promise.all([require('marked'), require('highlight-js')]).then(function(mods) {\n      const marked = mods[0]\n      const highlight = mods[1]\n      marked.setOptions({\n        highlight: function(code, lang) {\n          if (lang && highlight.getLanguage(lang)) {\n            return highlight.highlight(lang, code).value\n          } else {\n            return highlight.highlightAuto(code).value\n          }\n        }\n      })\n\n      return marked(code, options)\n    })\n  }\n\n  const escapeHtmlChar = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    '`': '&#96;'\n  }\n  const reUnescapedHtml = /[&<>\"'`]/g\n  _.escape = function(s) {\n    return (s + '').replace(reUnescapedHtml, function(c) {\n      return escapeHtmlChar[c]\n    })\n  }\n\n  return _\n})()\n\n    // avoid use with in strict mode\n    \n    /**\n * @license\n * Lodash (Custom Build) lodash.com/license | Underscore.js  underscorejs.org/LICENSE\n * Build: `lodash exports=\"none\" iife=\"(function(){%output%;return templates})()\" template=\"./build/temp/*.jst\" -o ./build/temp/templates.js`\n */\n    const templates = Function('config', \"return (function(){var undefined,freeGlobal=typeof global==\\\"object\\\"&&global&&global.Object===Object&&global,freeSelf=typeof self==\\\"object\\\"&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function(\\\"return this\\\")(),freeExports=typeof exports==\\\"object\\\"&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&typeof module==\\\"object\\\"&&module&&!module.nodeType&&module,_=root._||{},templates={article:{},index:{}};return templates.article=function(obj){function print(){__p+=__j.call(arguments,\\\"\\\");\\n}obj||(obj={});var __t,__p=\\\"\\\",__e=_.escape,__j=Array.prototype.join;with(obj)__p+='<article class=\\\"article\\\"><h1 class=\\\"article__title\\\">'+__e(data.title)+'</h1><header class=\\\"article__author\\\"><!-- <img class=\\\"article__author-avatar\\\" src=\\\"'+(null==(__t=data.user.avatar_url+\\\"&s=40\\\")?\\\"\\\":__t)+'\\\"> --><div>'+__e(data.created_at)+'</div></header><hr><div class=\\\"markdown-body\\\">'+(null==(__t=data.html)?\\\"\\\":__t)+\\\"</div><footer>\\\",data.labels.forEach(function(e){__p+='<a href=\\\"'+(null==(__t=_.hash.build({label:e.name\\n}))?\\\"\\\":__t)+'\\\" style=\\\"background:#'+(null==(__t=e.color)?\\\"\\\":__t)+'\\\">'+__e(e.name)+\\\"</a>\\\"}),__p+=\\\"</footer></article>\\\";return __p},templates.index=function(obj){function print(){__p+=__j.call(arguments,\\\"\\\")}obj||(obj={});var __t,__p=\\\"\\\",__e=_.escape,__j=Array.prototype.join;with(obj)__p+=\\\"<h1>\\\"+__e(config.name)+'</h1><hr><ul class=\\\"list\\\">',data.forEach(function(e){__p+='<li class=\\\"list__item\\\"><a class=\\\"list__title\\\" href=\\\"'+__e(_.hash.build({id:e.number}))+'\\\">'+__e(e.title)+'</a><div class=\\\"list__meta\\\"> #'+__e(e.number)+' posted at <time class=\\\"list__time\\\" datetime=\\\"'+__e(e.created_at)+'\\\">'+__e(e.created_at)+\\\"</time></div></li>\\\";\\n}),__p+=\\\"</ul>\\\",meta.Link&&(__p+='<hr><nav class=\\\"pagination\\\">',meta.Link.forEach(function(e){__p+='<a href=\\\"'+__e(_.hash.build({page:e[0].match(/[?&]page=(\\\\d+)/)[1]}))+'\\\" title=\\\"'+__e(e[1].rel)+'\\\">'+__e(e[1].rel)+\\\"</a>\\\"}),__p+=\\\"</nav>\\\");return __p},templates})();\")(config)\n\n    const github = (function() {\n  const head = document.head || document.getElementsByTagName('head')[0]\n  const ANONYMOUS_TOKEN_LIMIT = 60\n  const ASSUME_TOKEN_LIMIT = 5000\n  let timeDiff = 0\n  const anonymousToken = newToken('')\n  const tokens = _.map(config.accessTokens, function(token) {\n    if (_.isArray(token)) {\n      token = token.join('')\n    }\n\n    return newToken(token)\n  })\n\n  const GITHUB_ISSUES_API_BASE = (function() {\n    let url = [config.api]\n    if (config.repoId) {\n      url = url.concat(['repositories', config.repoId])\n    } else {\n      url = url.concat(['repos', config.owner, config.repo])\n    }\n    url.push('issues')\n\n    return url.join('/')\n  })()\n\n  function newToken(token) {\n    return {\n      token: token,\n      remaining: token ? ASSUME_TOKEN_LIMIT : ANONYMOUS_TOKEN_LIMIT,\n      reset: 0\n    }\n  }\n\n  function randomId() {\n    return (Math.random() * _.now())\n      .toString(16)\n      .replace('.', '')\n      .slice(0, 6)\n  }\n\n  function request(path, params, token) {\n    token = token || {}\n    const callbackName = 'jsonp_' + randomId()\n    const script = document.createElement('script')\n    params = _.assign({}, params, {\n      callback: callbackName\n    })\n\n    if (token.token) {\n      params.access_token = token.token\n    }\n\n    script.src = GITHUB_ISSUES_API_BASE + path + '?' + _.search.build(params)\n    head.appendChild(script)\n\n    function gc() {\n      head.removeChild(script)\n      window[callbackName] = null\n    }\n\n    return new Promise(function(resolve, reject) {\n      window[callbackName] = function(response) {\n        resolve(response)\n        gc()\n      }\n      script.onerror = function(err) {\n        reject(err)\n        gc()\n      }\n    }).then(function(data) {\n      return handleResponse(data, token)\n    })\n  }\n\n  function handleResponse(response, token) {\n    if (!response || !response.data) {\n      return Promise.reject('no data found.')\n    }\n\n    if (response.data.message) {\n      return Promise.reject(response.data.message)\n    }\n\n    const meta = response.meta\n    if (meta) {\n      const remaining = meta['X-RateLimit-Remaining']\n      const reset = meta['X-RateLimit-Reset']\n\n      if (remaining) {\n        token.remaining = parseInt(remaining, 10)\n      }\n\n      if (reset) {\n        token.reset = parseInt(remaining, 10) * 1000\n      }\n    }\n\n    return response\n  }\n\n  function resetTokenRemaining(token) {\n    if (!token.remaining) {\n      if (_.now() - anonymousToken.rest > 2 * 1000 * 1000) {\n        token.remaining = ASSUME_TOKEN_LIMIT\n      }\n    }\n\n    return token\n  }\n\n  function getToken() {\n    _.forEach(tokens, resetTokenRemaining)\n    return _.filter(tokens, function(token) {\n      return token.remaining\n    })[0]\n  }\n\n  function requestWithToken(path, params) {\n    const token = getToken()\n\n    return token\n      ? request(path, params, token)\n      : Promise.reject('no token')\n  }\n\n  function get(path, params) {\n    resetTokenRemaining(anonymousToken)\n\n    if (anonymousToken.remaining) {\n      return request(path, params, anonymousToken).catch(function() {\n        return requestWithToken(path, params)\n      })\n    } else {\n      return requestWithToken(path, params)\n    }\n  }\n\n  return {\n    get: get\n  }\n})()\n\n    const index = (function() {\n  const INDEX_STORAGE_KEY = 'index'\n  const expireTime = ((config.cache && config.cache.index) || 0) * 1000\n  const render = templates.index\n\n  function cached(page) {\n    if (!expireTime) {\n      return\n    }\n    return _.localforage.getItem(INDEX_STORAGE_KEY).then(function(cached) {\n      if (!cached || cached.pageSize !== config.pageSize) {\n        return\n      }\n      let data = cached.pages[page - 1]\n      if (!data || !data.time || _.now() - data.time > expireTime) {\n        return\n      }\n      return data\n    })\n  }\n\n  function fetch(page) {\n    return github\n      .get('', {\n        page: page,\n        per_page: config.pageSize\n      })\n      .then(function(data) {\n        storage(data, page)\n        return data\n      })\n  }\n\n  function storage(data, page) {\n    article.storage({\n      data: data.data\n    })\n\n    if (!expireTime) {\n      return data\n    }\n    return _.localforage\n      .getItem(INDEX_STORAGE_KEY)\n      .then(function(cached) {\n        if (!cached || cached.pageSize !== config.pageSize) {\n          cached = {\n            pages: [],\n            pageSize: config.pageSize\n          }\n        }\n\n        cached.pages[page - 1] = {\n          meta: {\n            Link: data.meta.Link,\n            ETag: data.meta.ETag\n          },\n          time: _.now(),\n          data: []\n        }\n\n        cached.pages[page - 1].data = data.data.map(function(item) {\n          return {\n            created_at: item.created_at,\n            title: item.title,\n            number: item.number\n          }\n        })\n\n        cached.time = _.now()\n\n        return cached\n      })\n      .then(function(cached) {\n        return _.localforage.setItem(INDEX_STORAGE_KEY, cached)\n      })\n      .then(function() {\n        return data\n      })\n  }\n\n  function get(page) {\n    page = parseInt(page, 10) || 1\n    if (page < 1) {\n      page = 1\n    }\n\n    return Promise.resolve()\n      .then(function() {\n        return cached(page)\n      })\n      .then(function(data) {\n        return data ? data : fetch(page)\n      })\n  }\n\n  return {\n    get: get,\n    storage: storage,\n    render: render\n  }\n})()\n\n    const article = (function() {\n  const ARTICLES_STORAGE_KEY = 'articles'\n  const expireTime = ((config.cache && config.cache.article) || 0) * 1000\n  const render = templates.article\n\n  function cached(id) {\n    if (!expireTime) {\n      return\n    }\n\n    return _.localforage.getItem(ARTICLES_STORAGE_KEY).then(function(cached) {\n      const data = cached && cached[id]\n      if (!data || !data.time || _.now() - data.time > expireTime) {\n        return\n      }\n      return data\n    })\n  }\n\n  function fetch(id) {\n    return github.get('/' + id).then(function(data) {\n      storage(data)\n      return data\n    })\n  }\n\n  function storage(data) {\n    if (!expireTime) {\n      return data\n    }\n\n    return _.localforage\n      .getItem(ARTICLES_STORAGE_KEY)\n      .then(function(cached) {\n        cached = cached || {}\n\n        if (data.data.forEach) {\n          data.data.forEach(function(item) {\n            cached[item.number] = {\n              data: item,\n              id: item.number,\n              time: _.now(),\n              meta: {\n                ETag: data.meta && data.meta.ETag\n              }\n            }\n          })\n        } else {\n          cached[data.data.number] = {\n            data: data.data,\n            id: data.data.number,\n            time: _.now(),\n            meta: {\n              ETag: data.meta && data.meta.ETag\n            }\n          }\n        }\n\n        return cached\n      })\n      .then(function(cached) {\n        return _.localforage.setItem(ARTICLES_STORAGE_KEY, cached)\n      })\n      .then(function() {\n        return data\n      })\n  }\n\n  function get(id) {\n    id = +id\n\n    return Promise.resolve()\n      .then(function() {\n        return cached(id)\n      })\n      .then(function(data) {\n        return data ? data : fetch(id)\n      })\n      .then(function(data) {\n        return _.markdown(data.data.body).then(function(html) {\n          data.data.html = html\n          return data\n        })\n      })\n  }\n\n  return {\n    get: get,\n    storage: storage,\n    render: render\n  }\n})()\n\n    const app = (function() {\n  var container = document.getElementById('js-app')\n\n  function showHTML(html) {\n    container.innerHTML = html\n  }\n\n  function showError(err) {\n    console.trace(err)\n    container.innerHTML =\n      'error occured <button onclick=\"location.reload()\">retry</button>'\n  }\n\n  function showIndex(page) {\n    document.title = config.name\n    return index.get(page).then(index.render)\n  }\n\n  function showArticle(id) {\n    return article.get(id).then(function(data){\n      document.title = data.data.title\n      return data\n    }).then(article.render)\n  }\n\n  function showLoading() {\n    container.innerHTML = 'loading...'\n  }\n\n  function showPage() {\n\n    const query = _.hash.parse(window.location.hash)\n    showLoading()\n    let promise\n\n    if (query.id) {\n      promise = showArticle(query.id)\n    } else if(query.label) {\n      alert('暂时不支持标签')\n      window.history.go(-1)\n      return\n    } else {\n      promise = showIndex(query.page)\n    }\n\n    return promise.then(showHTML).catch(showError)\n  }\n\n  function run() {\n    showPage()\n    window.addEventListener('hashchange', showPage, false)\n  }\n\n  return {\n    run: run\n  }\n})()\n\n\n    app.run()\n  })\n})()\n"]}