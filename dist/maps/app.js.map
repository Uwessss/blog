/* fisker-blog v1.0.0 | (c) 2017  | MIT License */
{"version":3,"sources":["app.js"],"names":["Function","require","config","paths","slice","Promise","document","_","now","Date","Object","prototype","toString","type","call","Array","toArray","from","isArray","isArrayLike","length","parseInt","forEach","hasOwnProperty","forIn","map","arr","filter","push","filted","assign","arguments","hash","parse","split","decodeURIComponent","data","build","encodeURIComponent","sort","join","search","localforage","setItem","then","getItem","markdown","all","setOptions","highlight","getLanguage","value","highlightAuto","escape","replace","token","remaining","reset","Math","random","removeChild","window","createElement","callback","access_token","src","appendChild","onerror","reject","message","meta","rest","head","getElementsByTagName","accessTokens","api","repoId","concat","owner","repo","get","catch","pageSize","pages","time","page","per_page","storage","Link","ETag","created_at","title","number","cache","index","resolve","render","id","article","body","html","innerHTML","console","trace","name","location","label","alert","history","go","getElementById","run","addEventListener"],"mappings":"aACC,CAAC,UAAW,CACX,GAAM,GAASA,SAAS,aAAT,GAAf,CACM,ytBADN,CAEM,EAAU,EAAOC,OAFvB,CAIA,EAAQC,MAAR,CAAe,CACbC,MAAO,CACL,YAAe,EAAOA,KAAP,aAA4BC,KAA5B,CAAkC,CAAlC,CAAqC,CAAC,CAAtC,CADV,CAEL,cAAe,EAAOD,KAAP,CAAa,aAAb,EAA4BC,KAA5B,CAAkC,CAAlC,CAAqC,CAAC,CAAtC,CAFV,CAGL,eAAgB,EAAOD,KAAP,CAAa,cAAb,EAA6BC,KAA7B,CAAmC,CAAnC,CAAsC,CAAC,CAAvC,CAHX,CAIL,OAAU,EAAOD,KAAP,QAAuBC,KAAvB,CAA6B,CAA7B,CAAgC,CAAC,CAAjC,CAJL,CADM,CAAf,CALW,CAcX,GAAI,GAAU,EAAOC,OAArB,CACC,CAAC,WAAmB,CAUvB,YAAyB,CACvB,EAAS,WAAc,CACrB,MAAO,OAAY,WAA0B,CAC3C,EAAQ,GAAR,CAAe,WAAc,CAC3B,IACD,CAFD,CAGD,CAJM,CAKR,CAND,CAOD,CAlBsB,EAOrB,GAPqB,CAErB,kBAAyB,WAAc,CACrC,EAAU,EAAIA,OADuB,CAErC,GACD,CAHD,CAkBC,CApBA,EAqBA,WAAkB,CACjB,GAAM,GAAW,EAAOC,QAAxB,CAEM,EAAK,UAAW,CACxB,GAAM,GAAI,EAAOC,CAAP,GAAa,EAAOA,CAAP,GAAb,CAAV,CAEA,EAAEC,GAAF,CAAQC,KAAKD,GAAL,EAAY,UAAW,CAC7B,MAAO,CAAE,GAAIC,KACd,CALuB,CAOxB,EAAER,OAAF,EAPwB,CAQxB,EAAEI,OAAF,EARwB,CAUxB,GAAM,GAAYK,OAAOC,SAAP,CAAiBC,QAAnC,CACA,EAAEC,IAAF,CAAS,WAAc,CACrB,MAAO,GAAUC,IAAV,IAAoBV,KAApB,CAA0B,CAA1B,CAA6B,CAAC,CAA9B,CACR,CAbuB,CAexB,GAAM,GAASW,MAAMJ,SAAN,CAAgBP,KAA/B,CACA,EAAEY,OAAF,CAAYD,MAAME,IAAN,EAAc,WAAc,CACtC,MAAO,GAAOH,IAAP,GACR,CAlBuB,CAoBxB,EAAEI,OAAF,CAAYH,MAAMG,OAAN,EAAiB,WAAc,CACzC,MAAuB,OAAhB,KAAEL,IAAF,GACR,CAtBuB,CAwBxB,EAAEM,WAAF,CAAgB,WAAc,CAC5B,MAAO,GAAED,OAAF,KACJ,GAA8B,QAAvB,KAAEL,IAAF,CAAO,EAAIO,MAAX,CAAP,EAA0CC,SAAS,EAAID,MAAb,CAAqB,EAArB,IAA6B,EAAIA,MAC/E,CA3BuB,CA6BxB,GAAM,GAAWL,MAAMJ,SAAN,CAAgBW,OAAhB,EAA2B,WAAa,CACvD,IAAK,GAAI,GAAI,CAAb,CAAgB,EAAI,KAAKF,MAAzB,CAAiC,GAAjC,CACE,EAAGN,IAAH,CAAQ,IAAR,CAAc,OAAd,GAA0B,IAA1B,CAEH,CAJD,CAMM,EAAa,aAAkB,CACnC,IAAK,GAAI,EAAT,MACM,EAAIS,cAAJ,GADN,EAEI,EAAGT,IAAH,GAAa,IAAb,KAGL,CAZD,CAcA,EAAEU,KAAF,EA3CwB,CA6CxB,EAAEF,OAAF,CAAY,aAAkB,CAC5B,CAAC,EAAEH,WAAF,OAAD,EAA6CL,IAA7C,KACD,CA/CuB,CAiDxB,GAAM,GAAOC,MAAMJ,SAAN,CAAgBc,GAAhB,EAAuB,WAAa,CAE/C,IAAK,GADC,KACD,CAAI,EAAI,CAAb,CAAgB,EAAI,KAAKL,MAAzB,CAAiC,GAAjC,CACE,KAAS,EAAGN,IAAH,CAAQ,IAAR,CAAc,OAAd,GAA0B,IAA1B,CAAT,CAGF,MAAOY,IACR,CAPD,CASA,EAAED,GAAF,CAAQ,aAAkB,CACxB,MAAO,GAAKX,IAAL,KACR,CA5DuB,CA8DxB,GAAM,GAAUC,MAAMJ,SAAN,CAAgBgB,MAAhB,EAA0B,WAAa,CAErD,IAAK,MADC,IACD,CAAI,EAAI,CAAb,CAAgB,EAAI,KAAKP,MAAzB,CAAiC,GAAjC,GACe,EAAGN,IAAH,CAAQ,IAAR,CAAc,OAAd,GAA0B,IAA1B,CADf,IAGI,EAAOc,IAAP,CAAY,OAAZ,CAHJ,CAMA,MAAOC,OACR,CATD,CAWA,EAAEF,MAAF,CAAW,aAAkB,CAC3B,MAAO,GAAQb,IAAR,KACR,CA3EuB,CA6ExB,EAAEgB,MAAF,CAAWpB,OAAOoB,MAAP,EAAiB,WAAiB,CAO3C,MANA,GAAER,OAAF,CAAU,EAAOR,IAAP,CAAYiB,SAAZ,CAAuB,CAAvB,CAAV,CAAqC,WAAiB,CACpD,EAAET,OAAF,GAAkB,aAAqB,CACrC,MACD,CAFD,CAGD,CAJD,CAMA,EACD,CArFuB,CAuFxB,EAAEU,IAAF,CAAU,UAAW,CAwBnB,MAAO,CACLC,MAxBF,WAAyB,CACvB,EAAO,EAAK7B,KAAL,CAAW,CAAX,CADgB,CAKvB,IAAK,GAHC,GAAS,EAAO,EAAK8B,KAAL,CAAW,GAAX,CAAP,GAGV,CAFC,IAED,CAAI,EAAI,CAAb,CAAgB,EAAI,EAAOd,MAA3B,CAAmC,GAAK,CAAxC,CACE,EAAKe,mBAAmB,IAAnB,CAAL,EAAsCA,mBACpC,EAAO,EAAI,CAAX,GAAiB,EADmB,CAAtC,CAKF,MAAOC,KACR,CAWM,CAELC,MAXF,WAAwB,CACtB,GAAM,KAAN,CAKA,MAJA,KAAiB,aAAqB,CACpC,EAAKT,IAAL,CAAUU,sBAA0B,GAA1B,CAAgCA,qBAA1C,CACD,CAFD,CAIA,CAAO,KAAO,EAAKC,IAAL,GAAYC,IAAZ,CAAiB,GAAjB,CACf,CAEM,CAIR,CA5BQ,EAvFe,CAqHxB,EAAEC,MAAF,CAAY,UAAW,CAUrB,MAAO,CACLJ,MAVF,WAA0B,CACxB,GAAM,KAAN,CAKA,MAJA,KAAiB,aAAqB,CACpC,EAAOT,IAAP,CAAYU,sBAA0B,GAA1B,CAAgCA,qBAA5C,CACD,CAFD,CAIA,CAAO,EAAOE,IAAP,CAAY,GAAZ,CACR,CAEM,CAGR,CAbU,EArHa,CA4JxB,EAAEE,WAAF,CAAiB,UAAW,CAa1B,MAAO,CACLC,QAbF,aAA6B,CAC3B,MAAO,GAAQ,aAAR,EAAuBC,IAAvB,CAA4B,WAAsB,CACvD,MAAO,GAAYD,OAAZ,CAAoB7B,IAApB,OACR,CAFM,CAGR,CAQM,CAEL+B,QARF,WAAsB,CACpB,MAAO,GAAQ,aAAR,EAAuBD,IAAvB,CAA4B,WAAsB,CACvD,MAAO,GAAYC,OAAZ,CAAoB/B,IAApB,KACR,CAFM,CAGR,CAEM,CAIR,CAjBe,EA5JQ,CA+KxB,EAAEgC,QAAF,CAAa,aAAwB,CACnC,MAAO,GAAQC,GAAR,CAAY,CAAC,EAAQ,QAAR,CAAD,CAAoB,EAAQ,cAAR,CAApB,CAAZ,EAA0DH,IAA1D,CAA+D,WAAe,CACnF,GAAM,GAAS,EAAK,CAAL,CAAf,CACM,EAAY,EAAK,CAAL,CADlB,CAYA,MAVA,GAAOI,UAAP,CAAkB,CAChBC,UAAW,uBAAqB,OAC1B,IAAQ,EAAUC,WAAV,GADkB,CAErB,EAAUD,SAAV,MAAgCE,KAFX,CAIrB,EAAUC,aAAV,IAA8BD,KAExC,CAPe,CAAlB,CAUA,CAAO,MACR,CAdM,CAeR,CA/LuB,CAiMxB,GAAM,2EAAN,CAQM,EAAkB,WARxB,CAeA,MANA,GAAEE,MAAF,CAAW,WAAY,CACrB,MAAO,CAAC,EAAI,EAAL,EAASC,OAAT,GAAkC,WAAY,CACnD,MAAO,KACR,CAFM,CAGR,CAED,EACD,CAjNa,EAFV,CA4NM,EAAYtD,SAAS,QAAT,CAAmB,++CAAnB,IA5NlB,CA8NM,EAAU,UAAW,CA0B7B,aAAyB,CACvB,MAAO,CACLuD,OADK,CAELC,UAAW,KAFN,CAGLC,MAAO,CAHF,CAKR,CAED,YAAoB,CAClB,MAAO,CAACC,KAAKC,MAAL,GAAgB,EAAEnD,GAAF,EAAjB,EACJI,QADI,CACK,EADL,EAEJ0C,OAFI,CAEI,GAFJ,CAES,EAFT,EAGJlD,KAHI,CAGE,CAHF,CAGK,CAHL,CAIR,CAED,iBAAsC,CAepC,YAAc,CACZ,EAAKwD,WAAL,GADY,CAEZC,UAAuB,IACxB,CAjBD,EAAQ,KAD4B,CAEpC,GAAM,GAAe,SAAW,GAAhC,CACM,EAAS,EAASC,aAAT,CAAuB,QAAvB,CADf,CAkBA,MAhBA,GAAS,EAAEhC,MAAF,MAAqB,CAC5BiC,UAD4B,CAArB,CAgBT,CAZI,EAAMR,KAYV,GAXE,EAAOS,YAAP,CAAsB,EAAMT,KAW9B,EARA,EAAOU,GAAP,CAAa,IAAgC,GAAhC,CAAsC,EAAExB,MAAF,CAASJ,KAAT,GAQnD,CAPA,EAAK6B,WAAL,GAOA,CAAO,MAAY,aAA0B,CAC3CL,UAAuB,WAAmB,CACxC,IADwC,CAExC,GACD,CAJ0C,CAK3C,EAAOM,OAAP,CAAiB,WAAc,CAC7B,IAD6B,CAE7B,GACD,CACF,CATM,EASJvB,IATI,CASC,WAAe,CACrB,MAAO,OACR,CAXM,CAYR,CAED,eAAyC,CACvC,GAAI,IAAa,CAAC,EAASR,IAA3B,CACE,MAAO,GAAQgC,MAAR,CAAe,gBAAf,CAAP,CAGF,GAAI,EAAShC,IAAT,CAAciC,OAAlB,CACE,MAAO,GAAQD,MAAR,CAAe,EAAShC,IAAT,CAAciC,OAA7B,CAAP,CAGF,GAAM,GAAO,EAASC,IAAtB,CACA,KAAU,CACR,GAAM,GAAY,EAAK,uBAAL,CAAlB,CACM,EAAQ,EAAK,mBAAL,CADd,CADQ,IAKN,EAAMd,SAAN,CAAkBnC,WAAoB,EAApB,CALZ,MASN,EAAMoC,KAAN,CAAc,eAAoB,EAApB,CATR,CAWT,CAED,QACD,CAED,aAAoC,CAOlC,MANI,CAAC,EAAMD,SAMX,EALM,UAAEhD,GAAF,GAAU,EAAe+D,IAK/B,GAJI,EAAMf,SAAN,EAIJ,GACD,CAED,YAAoB,CAElB,MADA,GAAElC,OAAF,KACA,CAAO,EAAEK,MAAF,GAAiB,WAAgB,CACtC,MAAO,GAAM6B,SACd,CAFM,EAEJ,CAFI,CAGR,CAED,eAAwC,CACtC,GAAM,GAAQ,GAAd,CAEA,MAAO,GACH,QADG,CAEH,EAAQY,MAAR,CAAe,UAAf,CACL,CA3HD,GAAM,GAAO,EAASI,IAAT,EAAiB,EAASC,oBAAT,CAA8B,MAA9B,EAAsC,CAAtC,CAA9B,CACM,EAAwB,EAD9B,CAEM,KAFN,CAIM,EAAiB,EAAS,EAAT,CAJvB,CAKM,EAAS,EAAEhD,GAAF,CAAM,EAAOiD,YAAb,CAA2B,WAAgB,CAKxD,MAJI,GAAExD,OAAF,GAIJ,GAHE,EAAQ,EAAMsB,IAAN,CAAW,EAAX,CAGV,EAAO,IACR,CANc,CALf,CAaM,EAA0B,UAAW,CACzC,GAAI,GAAM,CAAC,EAAOmC,GAAR,CAAV,CAQA,SAPI,EAAOC,MAOX,CANQ,EAAIC,MAAJ,CAAW,CAAC,cAAD,CAAiB,EAAOD,MAAxB,CAAX,CAMR,CAJQ,EAAIC,MAAJ,CAAW,CAAC,OAAD,CAAU,EAAOC,KAAjB,CAAwB,EAAOC,IAA/B,CAAX,CAIR,CAFA,EAAInD,IAAJ,CAAS,QAAT,CAEA,CAAO,EAAIY,IAAJ,CAAS,GAAT,CACR,CAV8B,EAb/B,CAyIA,MAAO,CACLwC,IAbF,aAA2B,OACzB,KADyB,CAGrB,EAAexB,SAHM,CAIhB,SAAsCyB,KAAtC,CAA4C,UAAW,CAC5D,MAAO,OACR,CAFM,CAJgB,CAQhB,MAEV,CAEM,CAGR,CA7IkB,EA9Nf,CA6WM,EAAS,UAAW,CAK5B,aAAsB,UAIb,EAAEvC,WAAF,CAAcG,OAAd,IAAyCD,IAAzC,CAA8C,WAAiB,CACpE,GAAI,GAAW,EAAOsC,QAAP,GAAoB,EAAOA,QAA1C,EAGA,GAAI,GAAO,EAAOC,KAAP,CAAa,EAAO,CAApB,CAAX,CAHA,MAII,IAAU,EAAKC,IAAf,IAAuB,EAAE5E,GAAF,GAAU,EAAK4E,IAAf,EAAvB,CAJJ,UAQD,CATM,CAJa,OAcrB,CAED,aAAqB,CACnB,MAAO,GAAOJ,GAAP,CAAW,EAAX,CAAe,CAClBK,MADkB,CAElBC,SAAU,EAAOJ,QAFC,CAAf,EAIJtC,IAJI,CAIC,WAAe,CAEnB,MADA,OACA,EACD,CAPI,CAQR,CAED,eAA6B,OAC3B,GAAQ2C,OAAR,CAAgB,CACdnD,KAAM,EAAKA,IADG,CAAhB,CAD2B,GAQpB,EAAEM,WAAF,CACJG,OADI,IAEJD,IAFI,CAEC,WAAiB,CA2BrB,MA1BI,IAAW,EAAOsC,QAAP,GAAoB,EAAOA,QA0B1C,GAzBE,EAAS,CACPC,QADO,CAEPD,SAAU,EAAOA,QAFV,CAyBX,EAnBA,EAAOC,KAAP,CAAa,EAAO,CAApB,EAAyB,CACvBb,KAAM,CACJkB,KAAM,EAAKlB,IAAL,CAAUkB,IADZ,CAEJC,KAAM,EAAKnB,IAAL,CAAUmB,IAFZ,CADiB,CAKvBL,KAAM,EAAE5E,GAAF,EALiB,CAMvB4B,OANuB,CAmBzB,CAVA,EAAO+C,KAAP,CAAa,EAAO,CAApB,EAAuB/C,IAAvB,CAA8B,EAAKA,IAAL,CAAUX,GAAV,CAAc,WAAe,CACzD,MAAO,CACLiE,WAAY,EAAKA,UADZ,CAELC,MAAO,EAAKA,KAFP,CAGLC,OAAQ,EAAKA,MAHR,CAKR,CAN6B,CAU9B,CAFA,EAAOR,IAAP,CAAc,EAAE5E,GAAF,EAEd,EACD,CA9BI,EA+BJoC,IA/BI,CA+BC,WAAiB,CACrB,MAAO,GAAEF,WAAF,CAAcC,OAAd,KACR,CAjCI,EAkCJC,IAlCI,CAkCC,UAAW,CACf,QACD,CApCI,CARoB,EA6C5B,CA5ED,GAAM,GAAoB,OAA1B,CACM,EAAc,EAAOiD,KAAP,EAAgB,EAAOA,KAAP,CAAaC,KAA9B,EAAwC,CAD3D,CAEM,EAAS,EAAUA,KAFzB,CA6FA,MAAO,CACLd,IAhBF,WAAmB,CAMjB,MALA,GAAO3D,WAAe,EAAf,GAAsB,CAK7B,CAJW,CAAP,EAIJ,GAHE,EAAO,CAGT,EAAO,EAAQ0E,OAAR,GACJnD,IADI,CACC,UAAW,CACf,MAAO,KACR,CAHI,EAIJA,IAJI,CAIC,WAAe,CACnB,MAAO,KAAc,IACtB,CANI,CAOR,CAEM,CAEL2C,SAFK,CAGLS,QAHK,CAKR,CAnGiB,EA7Wd,CAmdE,EAAW,UAAW,CAK1B,aAAoB,UAKX,EAAEtD,WAAF,CAAcG,OAAd,IAA4CD,IAA5C,CAAiD,WAAiB,CACvE,GAAM,GAAO,GAAU,IAAvB,CADuE,MAEnE,IAAU,EAAKwC,IAAf,IAAuB,EAAE5E,GAAF,GAAU,EAAK4E,IAAf,EAAvB,CAFmE,SAMxE,CANM,CALW,OAYnB,CAED,aAAmB,CACjB,MAAO,GAAOJ,GAAP,CAAW,KAAX,EAAqBpC,IAArB,CAA0B,WAAe,CAE9C,MADA,KACA,EACD,CAHM,CAIR,CAED,aAAuB,UAKd,EAAEF,WAAF,CACJG,OADI,IAEJD,IAFI,CAEC,WAAiB,CAyBrB,MAxBA,GAAS,KAwBT,CAtBG,EAAKR,IAAL,CAAUd,OAsBb,CArBE,EAAKc,IAAL,CAAUd,OAAV,CAAkB,WAAe,CAC/B,EAAO,EAAKsE,MAAZ,EAAsB,CACpBxD,MADoB,CAEpB6D,GAAI,EAAKL,MAFW,CAGpBR,KAAM,EAAE5E,GAAF,EAHc,CAIpB8D,KAAM,CACJmB,KAAM,EAAKnB,IAAL,EAAa,EAAKA,IAAL,CAAUmB,IADzB,CAJc,CAQvB,CATD,CAqBF,CAVE,EAAO,EAAKrD,IAAL,CAAUwD,MAAjB,EAA2B,CACzBxD,KAAM,EAAKA,IADc,CAEzB6D,GAAI,EAAK7D,IAAL,CAAUwD,MAFW,CAGzBR,KAAM,EAAE5E,GAAF,EAHmB,CAIzB8D,KAAM,CACJmB,KAAM,EAAKnB,IAAL,EAAa,EAAKA,IAAL,CAAUmB,IADzB,CAJmB,CAU7B,EACD,CA5BI,EA6BJ7C,IA7BI,CA6BC,WAAiB,CACrB,MAAO,GAAEF,WAAF,CAAcC,OAAd,KACR,CA/BI,EAgCJC,IAhCI,CAgCC,UAAW,CACf,QACD,CAlCI,CALc,EAwCtB,CAjED,GAAM,GAAuB,UAA7B,CACM,EAAc,EAAOiD,KAAP,EAAgB,EAAOA,KAAP,CAAaC,KAA9B,EAAwC,CAD3D,CAEM,EAAS,EAAUI,OAFzB,CAqFA,MAAO,CACLlB,IAnBF,WAAiB,CAGf,MAFA,GAAK,EAEL,CAAO,EAAQe,OAAR,GACJnD,IADI,CACC,UAAW,CACf,MAAO,KACR,CAHI,EAIJA,IAJI,CAIC,WAAe,CACnB,MAAO,KAAc,IACtB,CANI,EAOJA,IAPI,CAOC,WAAe,CACnB,MAAO,GAAEE,QAAF,CAAW,EAAKV,IAAL,CAAU+D,IAArB,EAA2BvD,IAA3B,CAAgC,WAAe,CAEpD,MADA,GAAKR,IAAL,CAAUgE,IAAV,EACA,EACD,CAHM,CAIR,CAZI,CAaR,CAEM,CAELb,SAFK,CAGLS,QAHK,CAKR,CA3Fe,EAndZ,CAgjBM,EAAO,UAAW,CAG1B,aAAwB,CACtB,EAAUK,SAAV,EACD,CAED,aAAwB,CACtBC,QAAQC,KAAR,GADsB,CAEtB,EAAUF,SAAV,CACE,oEACH,CAED,aAAyB,CAEvB,MADA,GAASV,KAAT,CAAiB,EAAOa,IACxB,CAAO,EAAMxB,GAAN,IAAgBpC,IAAhB,CAAqB,EAAMoD,MAA3B,CACR,CAED,aAAyB,CACvB,MAAO,GAAQhB,GAAR,IAAgBpC,IAAhB,CAAqB,WAAc,CAExC,MADA,GAAS+C,KAAT,CAAiB,EAAKvD,IAAL,CAAUuD,KAC3B,EACD,CAHM,EAGJ/C,IAHI,CAGC,EAAQoD,MAHT,CAIR,CAED,YAAuB,CACrB,EAAUK,SAAV,CAAsB,YACvB,CAED,YAAoB,CAElB,GAAM,GAAQ,EAAErE,IAAF,CAAOC,KAAP,CAAa4B,OAAO4C,QAAP,CAAgBzE,IAA7B,CAAd,CACA,GAHkB,CAIlB,GAAI,EAAJ,CAEA,GAAI,EAAMiE,EAAV,CACE,EAAU,EAAY,EAAMA,EAAlB,CADZ,MAEO,GAAG,EAAMS,KAAT,CAGL,MAFAC,OAAM,4CAAN,CAEA,KADA9C,QAAO+C,OAAP,CAAeC,EAAf,CAAkB,CAAC,CAAnB,CACA,CAEA,EAAU,EAAU,EAAMxB,IAAhB,CAPZ,CAUA,MAAO,GAAQzC,IAAR,IAAuBqC,KAAvB,GACR,CA7CD,GAAI,GAAY,EAAS6B,cAAT,CAAwB,QAAxB,CAAhB,CAoDA,MAAO,CACLC,IANF,UAAe,CACb,GADa,CAEblD,OAAOmD,gBAAP,CAAwB,YAAxB,MACD,CAEM,CAGR,CAxDe,EAhjBZ,CA2mBA,EAAID,GAAJ,EACD,CAloBA,CAmoBF,CAlpBA,G","file":"../app.js","sourcesContent":["\n;(function() {\n  const global = Function('return this')()\n  const config = {\"api\":\"https://api.github.com\",\"accessTokens\":[[\"5\",\"a41e75c8b2\",\"2c70d70b08ae21\",\"5cd774758e3b8b0\"]],\"cache\":{\"index\":5000,\"article\":60000},\"name\":\"fisker's blog\",\"owner\":\"fisker\",\"repo\":\"fisker.github.io\",\"pageSize\":30,\"paths\":{\"require-js\":\"https://cdn.bootcss.com/require.js/2.3.5/require.min.js\",\"localforage\":\"https://cdn.bootcss.com/localforage/1.5.0/localforage.min.js\",\"es6-promise\":\"https://cdn.bootcss.com/es6-promise/4.1.1/es6-promise.min.js\",\"highlight-js\":\"https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js\",\"marked\":\"https://cdn.bootcss.com/marked/0.3.6/marked.min.js\",\"primer-markdown\":\"https://unpkg.com/primer-markdown@3.6.0/build/build.css\",\"highlight-js-css\":\"https://unpkg.com/highlight.js@9.12.0/styles/darkula.css\"}}\n  const require = global.require\n\n  require.config({\n    paths: {\n      'localforage': config.paths['localforage'].slice(0, -3),\n      'es6-promise': config.paths['es6-promise'].slice(0, -3),\n      'highlight-js': config.paths['highlight-js'].slice(0, -3),\n      'marked': config.paths['marked'].slice(0, -3),\n    }\n  })\n\n  let Promise = global.Promise\n  ;(function(callback) {\n    if (!Promise) {\n  require(['es6-promise'], function(mod) {\n    Promise = mod.Promise\n    afterPromised()\n  })\n} else {\n  afterPromised()\n}\n\nfunction afterPromised() {\n  callback(function(mod) {\n    return new Promise(function(resolve, reject) {\n      require([mod], function(mod) {\n        resolve(mod)\n      })\n    })\n  })\n}\n\n  })\n  (function(require) {\n    const document = global.document\n\n    const _ = (function() {\n  const _ = global._ || (global._ = {})\n\n  _.now = Date.now || function() {\n    return + new Date()\n  }\n\n  _.require = require\n  _.Promise = Promise\n\n  const _toString = Object.prototype.toString\n  _.type = function(obj) {\n    return _toString.call(obj).slice(7, -1)\n  }\n\n  const _slice = Array.prototype.slice\n  _.toArray = Array.from || function(obj) {\n    return _slice.call(obj)\n  }\n\n  _.isArray = Array.isArray || function(obj) {\n    return _.type(obj) === 'Array'\n  }\n\n  _.isArrayLike = function(obj) {\n    return _.isArray(obj) ||\n      (obj && _.type(obj.length) === 'Number' && parseInt(obj.length, 10) === obj.length)\n  }\n\n  const _forEach = Array.prototype.forEach || function(fn) {\n    for (let i = 0; i < this.length; i++) {\n      fn.call(this, this[i], i, this)\n    }\n  }\n\n  const _forInEach = function(obj, fn) {\n    for (let key in obj) {\n      if (obj.hasOwnProperty(key)) {\n        fn.call(obj, obj[key], key, obj)\n      }\n    }\n  }\n\n  _.forIn = _forInEach\n\n  _.forEach = function(obj, fn) {\n    (_.isArrayLike(obj) ? _forEach : _forInEach).call(obj, fn)\n  }\n\n  const _map = Array.prototype.map || function(fn) {\n    const arr = []\n    for (let i = 0; i < this.length; i++) {\n      arr[i] = fn.call(this, this[i], i, this)\n    }\n\n    return arr\n  }\n\n  _.map = function(obj, fn) {\n    return _map.call(obj, fn)\n  }\n\n  const _filter = Array.prototype.filter || function(fn) {\n    const filted = []\n    for (let i = 0; i < this.length; i++) {\n      let result = fn.call(this, this[i], i, this)\n      if (result) {\n        filted.push(this[i])\n      }\n    }\n    return filted\n  }\n\n  _.filter = function(obj, fn) {\n    return _filter.call(obj, fn)\n  }\n\n  _.assign = Object.assign || function(target) {\n    _.forEach(_slice.call(arguments, 1), function(source) {\n      _.forEach(source, function(value, key) {\n        target[key] = value\n      })\n    })\n\n    return target\n  }\n\n  _.hash = (function() {\n    function parseHash(hash) {\n      hash = hash.slice(2)\n      const pieces = hash ? hash.split('/') : []\n      const data = {}\n\n      for (let i = 0; i < pieces.length; i += 2) {\n        data[decodeURIComponent(pieces[i])] = decodeURIComponent(\n          pieces[i + 1] || ''\n        )\n      }\n\n      return data\n    }\n\n    function hashLink(data) {\n      const hash = []\n      _forInEach(data, function(value, key) {\n        hash.push(encodeURIComponent(key) + '/' + encodeURIComponent(value))\n      })\n\n      return '#/' + hash.sort().join('/')\n    }\n\n    return {\n      parse: parseHash,\n      build: hashLink\n    }\n  })()\n\n  _.search = (function() {\n    function buildQuery(data) {\n      const search = []\n      _forInEach(data, function(value, key) {\n        search.push(encodeURIComponent(key) + '=' + encodeURIComponent(value))\n      })\n\n      return search.join('&')\n    }\n\n    return {\n      build: buildQuery\n    }\n  })()\n\n  // const templateCompiled = {}\n  // const templateOptions = {\n  //   _: _,\n  //   config: config\n  // }\n\n  // _.template = (function(template) {\n  //   if (templateCompiled[template]) {\n  //     return templateCompiled[template]\n  //   }\n  //   return require('lodash.template')\n  //     .then(function(engine) {\n  //       return templateCompiled[template] = engine(template, templateOptions)\n  //     })\n  // })\n\n  // _.render = function(template) {\n  //   return function(data) {\n  //     return Promise.resolve(_.template(template)).then(function(compiled) {\n  //       return compiled(data)\n  //     })\n  //   }\n  // }\n\n  _.localforage = (function() {\n    function setItem(key, value) {\n      return require('localforage').then(function(localforage) {\n        return localforage.setItem.call(localforage, key, value)\n      })\n    }\n\n    function getItem(key) {\n      return require('localforage').then(function(localforage) {\n        return localforage.getItem.call(localforage, key)\n      })\n    }\n\n    return {\n      setItem: setItem,\n      getItem: getItem\n    }\n  })()\n\n  _.markdown = function(code, options) {\n    return Promise.all([require('marked'), require('highlight-js')]).then(function(mods) {\n      const marked = mods[0]\n      const highlight = mods[1]\n      marked.setOptions({\n        highlight: function(code, lang) {\n          if (lang && highlight.getLanguage(lang)) {\n            return highlight.highlight(lang, code).value\n          } else {\n            return highlight.highlightAuto(code).value\n          }\n        }\n      })\n\n      return marked(code, options)\n    })\n  }\n\n  const escapeHtmlChar = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    '`': '&#96;'\n  }\n  const reUnescapedHtml = /[&<>\"'`]/g\n  _.escape = function(s) {\n    return (s + '').replace(reUnescapedHtml, function(c) {\n      return escapeHtmlChar[c]\n    })\n  }\n\n  return _\n})()\n\n    // avoid use with in strict mode\n    \n    /**\n * @license\n * Lodash (Custom Build) lodash.com/license | Underscore.js  underscorejs.org/LICENSE\n * Build: `lodash exports=\"none\" iife=\"(function(){%output%;return templates})()\" template=\"./build/temp/*.jst\" -o ./build/temp/templates.js`\n */\n    const templates = Function('config', \"return (function(){var f=typeof self==\\\"object\\\"&&self&&self.Object===Object&&self,e=(typeof global==\\\"object\\\"&&global&&global.Object===Object&&global||f||Function(\\\"return this\\\")())._||{};return{article:function(c){c||(c={});var a,b=\\\"\\\",d=e.escape;with(c)b+='<article class=\\\"article\\\"><h1 class=\\\"article__title\\\">'+d(data.title)+'</h1><header class=\\\"article__author\\\"><!-- <img class=\\\"article__author-avatar\\\" src=\\\"'+(null==(a=data.user.avatar_url+\\\"&s=40\\\")?\\\"\\\":a)+'\\\"> --><div>'+d(data.created_at)+'</div></header><hr><div class=\\\"markdown-body\\\">'+(null==(a=data.html)?\\\"\\\":a)+\\\"</div><footer>\\\",\\ndata.labels.forEach(function(t){b+='<a href=\\\"'+(null==(a=e.hash.build({label:t.name}))?\\\"\\\":a)+'\\\" style=\\\"background:#'+(null==(a=t.color)?\\\"\\\":a)+'\\\">'+d(t.name)+\\\"</a>\\\"}),b+=\\\"</footer></article>\\\";return b},index:function(c){c||(c={});var a=\\\"\\\",b=e.escape;with(c)a+=\\\"<h1>\\\"+b(config.name)+'</h1><hr><ul class=\\\"list\\\">',data.forEach(function(t){a+='<li class=\\\"list__item\\\"><a class=\\\"list__title\\\" href=\\\"'+b(e.hash.build({id:t.number}))+'\\\">'+b(t.title)+'</a><div class=\\\"list__meta\\\">\\\\n        # '+b(t.number)+'\\\\n        posted\\\\n        <time class=\\\"list__time\\\" datetime=\\\"'+b(t.created_at)+'\\\">'+b(t.created_at)+\\\"</time></div></li>\\\";\\n}),a+=\\\"</ul>\\\",meta.Link&&(a+='<hr><nav class=\\\"pagination\\\">',meta.Link.forEach(function(t){a+='<a href=\\\"'+b(e.hash.build({page:t[0].match(/[?&]page=(\\\\d+)/)[1]}))+'\\\" title=\\\"'+b(t[1].rel)+'\\\">'+b(t[1].rel)+\\\"</a>\\\"}),a+=\\\"</nav>\\\");return a}}})();\")(config)\n\n    const github = (function() {\n  const head = document.head || document.getElementsByTagName('head')[0]\n  const ANONYMOUS_TOKEN_LIMIT = 60\n  const ASSUME_TOKEN_LIMIT = 5000\n  let timeDiff = 0\n  const anonymousToken = newToken('')\n  const tokens = _.map(config.accessTokens, function(token) {\n    if (_.isArray(token)) {\n      token = token.join('')\n    }\n\n    return newToken(token)\n  })\n\n  const GITHUB_ISSUES_API_BASE = (function() {\n    let url = [config.api]\n    if (config.repoId) {\n      url = url.concat(['repositories', config.repoId])\n    } else {\n      url = url.concat(['repos', config.owner, config.repo])\n    }\n    url.push('issues')\n\n    return url.join('/')\n  })()\n\n  function newToken(token) {\n    return {\n      token: token,\n      remaining: token ? ASSUME_TOKEN_LIMIT : ANONYMOUS_TOKEN_LIMIT,\n      reset: 0\n    }\n  }\n\n  function randomId() {\n    return (Math.random() * _.now())\n      .toString(16)\n      .replace('.', '')\n      .slice(0, 6)\n  }\n\n  function request(path, params, token) {\n    token = token || {}\n    const callbackName = 'jsonp_' + randomId()\n    const script = document.createElement('script')\n    params = _.assign({}, params, {\n      callback: callbackName\n    })\n\n    if (token.token) {\n      params.access_token = token.token\n    }\n\n    script.src = GITHUB_ISSUES_API_BASE + path + '?' + _.search.build(params)\n    head.appendChild(script)\n\n    function gc() {\n      head.removeChild(script)\n      window[callbackName] = null\n    }\n\n    return new Promise(function(resolve, reject) {\n      window[callbackName] = function(response) {\n        resolve(response)\n        gc()\n      }\n      script.onerror = function(err) {\n        reject(err)\n        gc()\n      }\n    }).then(function(data) {\n      return handleResponse(data, token)\n    })\n  }\n\n  function handleResponse(response, token) {\n    if (!response || !response.data) {\n      return Promise.reject('no data found.')\n    }\n\n    if (response.data.message) {\n      return Promise.reject(response.data.message)\n    }\n\n    const meta = response.meta\n    if (meta) {\n      const remaining = meta['X-RateLimit-Remaining']\n      const reset = meta['X-RateLimit-Reset']\n\n      if (remaining) {\n        token.remaining = parseInt(remaining, 10)\n      }\n\n      if (reset) {\n        token.reset = parseInt(remaining, 10) * 1000\n      }\n    }\n\n    return response\n  }\n\n  function resetTokenRemaining(token) {\n    if (!token.remaining) {\n      if (_.now() - anonymousToken.rest > 2 * 1000 * 1000) {\n        token.remaining = ASSUME_TOKEN_LIMIT\n      }\n    }\n\n    return token\n  }\n\n  function getToken() {\n    _.forEach(tokens, resetTokenRemaining)\n    return _.filter(tokens, function(token) {\n      return token.remaining\n    })[0]\n  }\n\n  function requestWithToken(path, params) {\n    const token = getToken()\n\n    return token\n      ? request(path, params, token)\n      : Promise.reject('no token')\n  }\n\n  function get(path, params) {\n    resetTokenRemaining(anonymousToken)\n\n    if (anonymousToken.remaining) {\n      return request(path, params, anonymousToken).catch(function() {\n        return requestWithToken(path, params)\n      })\n    } else {\n      return requestWithToken(path, params)\n    }\n  }\n\n  return {\n    get: get\n  }\n})()\n\n    const index = (function() {\n  const INDEX_STORAGE_KEY = 'index'\n  const expireTime = (config.cache && config.cache.index) || 0\n  const render = templates.index\n\n  function cached(page) {\n    if (!expireTime) {\n      return\n    }\n    return _.localforage.getItem(INDEX_STORAGE_KEY).then(function(cached) {\n      if (!cached || cached.pageSize !== config.pageSize) {\n        return\n      }\n      let data = cached.pages[page - 1]\n      if (!data || !data.time || _.now() - data.time > expireTime) {\n        return\n      }\n      return data\n    })\n  }\n\n  function fetch(page) {\n    return github.get('', {\n        page: page,\n        per_page: config.pageSize\n      })\n      .then(function(data) {\n        storage(data, page)\n        return data\n      })\n  }\n\n  function storage(data, page) {\n    article.storage({\n      data: data.data\n    })\n\n    if (!expireTime) {\n      return data\n    }\n    return _.localforage\n      .getItem(INDEX_STORAGE_KEY)\n      .then(function(cached) {\n        if (!cached || cached.pageSize !== config.pageSize) {\n          cached = {\n            pages: [],\n            pageSize: config.pageSize\n          }\n        }\n\n        cached.pages[page - 1] = {\n          meta: {\n            Link: data.meta.Link,\n            ETag: data.meta.ETag\n          },\n          time: _.now(),\n          data: []\n        }\n\n        cached.pages[page - 1].data = data.data.map(function(item) {\n          return {\n            created_at: item.created_at,\n            title: item.title,\n            number: item.number\n          }\n        })\n\n        cached.time = _.now()\n\n        return cached\n      })\n      .then(function(cached) {\n        return _.localforage.setItem(INDEX_STORAGE_KEY, cached)\n      })\n      .then(function() {\n        return data\n      })\n  }\n\n  function get(page) {\n    page = parseInt(page, 10) || 1\n    if (page < 1) {\n      page = 1\n    }\n\n    return Promise.resolve()\n      .then(function() {\n        return cached(page)\n      })\n      .then(function(data) {\n        return data ? data : fetch(page)\n      })\n  }\n\n  return {\n    get: get,\n    storage: storage,\n    render: render\n  }\n})()\n\n    \nconst article = (function() {\n  const ARTICLES_STORAGE_KEY = 'articles'\n  const expireTime = (config.cache && config.cache.index) || 0\n  const render = templates.article\n\n  function cached(id) {\n    if (!expireTime) {\n      return\n    }\n\n    return _.localforage.getItem(ARTICLES_STORAGE_KEY).then(function(cached) {\n      const data = cached && cached[id]\n      if (!data || !data.time || _.now() - data.time > expireTime) {\n        return\n      }\n      return data\n    })\n  }\n\n  function fetch(id) {\n    return github.get('/' + id).then(function(data) {\n      storage(data)\n      return data\n    })\n  }\n\n  function storage(data) {\n    if (!expireTime) {\n      return data\n    }\n\n    return _.localforage\n      .getItem(ARTICLES_STORAGE_KEY)\n      .then(function(cached) {\n        cached = cached || {}\n\n        if(data.data.forEach) {\n          data.data.forEach(function(item) {\n            cached[item.number] = {\n              data: item,\n              id: item.number,\n              time: _.now(),\n              meta: {\n                ETag: data.meta && data.meta.ETag\n              }\n            }\n          })\n        } else {\n          cached[data.data.number] = {\n            data: data.data,\n            id: data.data.number,\n            time: _.now(),\n            meta: {\n              ETag: data.meta && data.meta.ETag\n            }\n          }\n        }\n\n        return cached\n      })\n      .then(function(cached) {\n        return _.localforage.setItem(ARTICLES_STORAGE_KEY, cached)\n      })\n      .then(function() {\n        return data\n      })\n  }\n\n  function get(id) {\n    id = +id\n\n    return Promise.resolve()\n      .then(function() {\n        return cached(id)\n      })\n      .then(function(data) {\n        return data ? data : fetch(id)\n      })\n      .then(function(data) {\n        return _.markdown(data.data.body).then(function(html) {\n          data.data.html = html\n          return data\n        })\n      })\n  }\n\n  return {\n    get: get,\n    storage: storage,\n    render: render\n  }\n})()\n\n    const app = (function() {\n  var container = document.getElementById('js-app')\n\n  function showHTML(html) {\n    container.innerHTML = html\n  }\n\n  function showError(err) {\n    console.trace(err)\n    container.innerHTML =\n      'error occured <button onclick=\"location.reload()\">retry</button>'\n  }\n\n  function showIndex(page) {\n    document.title = config.name\n    return index.get(page).then(index.render)\n  }\n\n  function showArticle(id) {\n    return article.get(id).then(function(data){\n      document.title = data.data.title\n      return data\n    }).then(article.render)\n  }\n\n  function showLoading() {\n    container.innerHTML = 'loading...'\n  }\n\n  function showPage() {\n\n    const query = _.hash.parse(window.location.hash)\n    showLoading()\n    let promise\n\n    if (query.id) {\n      promise = showArticle(query.id)\n    } else if(query.label) {\n      alert('暂时不支持标签')\n      window.history.go(-1)\n      return\n    } else {\n      promise = showIndex(query.page)\n    }\n\n    return promise.then(showHTML).catch(showError)\n  }\n\n  function run() {\n    showPage()\n    window.addEventListener('hashchange', showPage, false)\n  }\n\n  return {\n    run: run\n  }\n})()\n\n\n    app.run()\n  })\n})()\n"]}