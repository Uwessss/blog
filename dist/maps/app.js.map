/* fisker-blog v1.0.0 | (c) 2024 fisker Cheung | MIT License */
{"version":3,"sources":["app.js"],"names":["global","Function","config","api","accessTokens","cache","index","article","name","owner","repo","pageSize","require","paths","marked","\"highlight-js\"","\"es6-promise\"","localforage","Promise","callback","afterPromised","module_","resolve","document","_","now","Date","_toString","Object","prototype","toString","type","object","call","slice","_slice","Array","toArray","from","isArray","isArrayLike","length","parseInt","_forEach","forEach","function_","hasOwnProperty","value","key","_forInEach","forIn","_map","map","array","_filter","filter","result","filted","push","assign","target","arguments","source","hash","parse","pieces","split","data","decodeURIComponent","build","concat","encodeURIComponent","sort","join","search","setItem","then","getItem","markdown","code","options","all","mods","highlight","setOptions","lang","getLanguage","highlightAuto","escapeHtmlChar","\"&\"","\"<\"","\">\"","'\"'","\"'\"","\"`\"","reUnescapedHtml","escape","s","String","replace","c","templates","github","newToken","token","remaining","reset","randomId","Math","random","request","path","parameters","gc","head","removeChild","script","window","callbackName","createElement","access_token","src","GITHUB_ISSUES_API_BASE","appendChild","reject","response","onerror","error","handleResponse","Error","message","meta","resetTokenRemaining","anonymousToken","rest","getToken","tokens","find","requestWithToken","getElementsByTagName","url","repoId","get","cached","page","expireTime","pages","time","fetch","per_page","state","creator","storage","Link","ETag","item","created_at","title","number","INDEX_STORAGE_KEY","render","id","body","html","ARTICLES_STORAGE_KEY","app","showHTML","container","innerHTML","showError","console","trace","showIndex","showArticle","showLoading","showPage","query","location","promise","label","alert","history","go","run","addEventListener","getElementById"],"mappings":"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","file":"../app.js","sourcesContent":["\n;(function() {\n  const global = Function('return this')()\n  const config = {\n  \"api\": \"//api.github.com\",\n  \"accessTokens\": [\n    [\n      \"5\",\n      \"a41e75c8b2\",\n      \"2c70d70b08ae21\",\n      \"5cd774758e3b8b0\"\n    ]\n  ],\n  \"cache\": {\n    \"index\": 5000,\n    \"article\": 60000\n  },\n  \"name\": \"fisker's blog\",\n  \"owner\": \"fisker\",\n  \"repo\": \"blog\",\n  \"pageSize\": 30,\n  \"require\": {\n    \"paths\": {\n      \"marked\": \"//cdn.bootcss.com/marked/0.7.0/marked.min\",\n      \"highlight-js\": \"//cdn.bootcss.com/highlight.js/9.15.8/highlight.min\",\n      \"es6-promise\": \"//cdn.bootcss.com/es6-promise/4.1.1/es6-promise.min\",\n      \"localforage\": \"//cdn.bootcss.com/localforage/1.7.3/localforage.min\"\n    }\n  }\n}\n  const require = global.require\n\n  require.config(config.require)\n\n  let Promise = global.Promise\n  ;(function(callback) {\n    /* global callback: true */\nif (!Promise) {\n  require(['es6-promise'], function (module_) {\n    Promise = module_.Promise\n    afterPromised()\n  })\n} else {\n  afterPromised()\n}\n\nfunction afterPromised() {\n  callback(function (module_) {\n    return new Promise(function (resolve, reject) {\n      require([module_], function (module_) {\n        resolve(module_)\n      })\n    })\n  })\n}\n\n  })\n  (function(require) {\n    const document = global.document\n\n    const _ = (function () {\n  const _ = global._ || (global._ = {})\n\n  _.now =\n    Date.now ||\n    function () {\n      return Number(new Date())\n    }\n\n  _.require = require\n  _.Promise = Promise\n\n  const _toString = Object.prototype.toString\n  _.type = function (object) {\n    return _toString.call(object).slice(7, -1)\n  }\n\n  const _slice = Array.prototype.slice\n  _.toArray =\n    Array.from ||\n    function (object) {\n      return _slice.call(object)\n    }\n\n  _.isArray =\n    Array.isArray ||\n    function (object) {\n      return _.type(object) === 'Array'\n    }\n\n  _.isArrayLike = function (object) {\n    return (\n      _.isArray(object) ||\n      (object &&\n        _.type(object.length) === 'Number' &&\n        parseInt(object.length, 10) === object.length)\n    )\n  }\n\n  const _forEach =\n    Array.prototype.forEach ||\n    function (function_) {\n      for (let index = 0; index < this.length; index += 1) {\n        function_.call(this, this[index], index, this)\n      }\n    }\n\n  const hasOwnProperty = function (value, key) {\n    return (\n      typeof value !== 'undefined' &&\n      value !== null &&\n      Object.prototype.hasOwnProperty.call(value, key)\n    )\n  }\n\n  const _forInEach = function (object, function_) {\n    for (const key in object) {\n      if (hasOwnProperty(object, key)) {\n        function_.call(object, object[key], key, object)\n      }\n    }\n  }\n\n  _.forIn = _forInEach\n\n  _.forEach = function (object, function_) {\n    ;(_.isArrayLike(object) ? _forEach : _forInEach).call(object, function_)\n  }\n\n  const _map =\n    Array.prototype.map ||\n    function (function_) {\n      const array = []\n      for (let index = 0; index < this.length; index += 1) {\n        array[index] = function_.call(this, this[index], index, this)\n      }\n\n      return array\n    }\n\n  _.map = function (object, function_) {\n    return _map.call(object, function_)\n  }\n\n  const _filter =\n    Array.prototype.filter ||\n    function (function_) {\n      const filted = []\n      for (let index = 0; index < this.length; index += 1) {\n        const result = function_.call(this, this[index], index, this)\n        if (result) {\n          filted.push(this[index])\n        }\n      }\n      return filted\n    }\n\n  _.filter = function (object, function_) {\n    return _filter.call(object, function_)\n  }\n\n  _.assign =\n    Object.assign ||\n    function (target) {\n      _.forEach(_slice.call(arguments, 1), function (source) {\n        _.forEach(source, function (value, key) {\n          target[key] = value\n        })\n      })\n\n      return target\n    }\n\n  _.hash = (function () {\n    function parseHash(hash) {\n      hash = hash.slice(2)\n      const pieces = hash ? hash.split('/') : []\n      const data = {}\n\n      for (let index = 0; index < pieces.length; index += 2) {\n        data[decodeURIComponent(pieces[index])] = decodeURIComponent(\n          pieces[index + 1] || '',\n        )\n      }\n\n      return data\n    }\n\n    function hashLink(data) {\n      const hash = []\n      _forInEach(data, function (value, key) {\n        hash.push(`${encodeURIComponent(key)}/${encodeURIComponent(value)}`)\n      })\n\n      return `#/${hash.sort().join('/')}`\n    }\n\n    return {\n      parse: parseHash,\n      build: hashLink,\n    }\n  })()\n\n  _.search = (function () {\n    function buildQuery(data) {\n      const search = []\n      _forInEach(data, function (value, key) {\n        search.push(`${encodeURIComponent(key)}=${encodeURIComponent(value)}`)\n      })\n\n      return search.join('&')\n    }\n\n    return {\n      build: buildQuery,\n    }\n  })()\n\n  // const templateCompiled = {}\n  // const templateOptions = {\n  //   _: _,\n  //   config: config\n  // }\n\n  // _.template = (function(template) {\n  //   if (templateCompiled[template]) {\n  //     return templateCompiled[template]\n  //   }\n  //   return require('lodash.template')\n  //     .then(function(engine) {\n  //       return templateCompiled[template] = engine(template, templateOptions)\n  //     })\n  // })\n\n  // _.render = function(template) {\n  //   return function(data) {\n  //     return Promise.resolve(_.template(template)).then(function(compiled) {\n  //       return compiled(data)\n  //     })\n  //   }\n  // }\n\n  _.localforage = (function () {\n    function setItem(key, value) {\n      return require('localforage').then(function (localforage) {\n        return localforage.setItem(key, value)\n      })\n    }\n\n    function getItem(key) {\n      return require('localforage').then(function (localforage) {\n        return localforage.getItem(key)\n      })\n    }\n\n    return {\n      setItem,\n      getItem,\n    }\n  })()\n\n  _.markdown = function (code, options) {\n    return Promise.all([require('marked'), require('highlight-js')]).then(\n      function (mods) {\n        const marked = mods[0]\n        const highlight = mods[1]\n        marked.setOptions({\n          highlight(code, lang) {\n            if (lang && highlight.getLanguage(lang)) {\n              return highlight.highlight(lang, code).value\n            }\n            return highlight.highlightAuto(code).value\n          },\n        })\n\n        return marked(code, options)\n      },\n    )\n  }\n\n  const escapeHtmlChar = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    '`': '&#96;',\n  }\n  const reUnescapedHtml = /[\"&'<>`]/g\n  _.escape = function (s) {\n    return String(s).replace(reUnescapedHtml, function (c) {\n      return escapeHtmlChar[c]\n    })\n  }\n\n  return _\n})()\n\n    // avoid use with in strict mode\n    \n    \n    const templates = Function('config', \"return (function(){\\n  var undefined;\\n\\n  var freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\\n\\n  var freeSelf = typeof self == 'object' && self && self.Object === Object && self;\\n\\n  var root = freeGlobal || freeSelf || Function('return this')();\\n\\n  var freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\\n\\n  var freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\\n\\n  var _ = root._ || {};\\n\\n  /*----------------------------------------------------------------------------*/\\n\\n  var templates = {\\n    'article': {},\\n    'index': {}\\n  };\\n\\n  templates['article'] =   function(obj) {\\n    obj || (obj = {});\\n    var __t, __p = '', __e = _.escape, __j = Array.prototype.join;\\n    function print() { __p += __j.call(arguments, '') }\\n    with (obj) {\\n    __p += '<article class=\\\"article\\\"><h1 class=\\\"article__title\\\">' +\\n    __e( data.title ) +\\n    '</h1><header class=\\\"article__author\\\"><!-- <img class=\\\"article__author-avatar\\\" src=\\\"' +\\n    ((__t = ( data.user.avatar_url + '&s=40' )) == null ? '' : __t) +\\n    '\\\"> --><div>' +\\n    __e( data.created_at ) +\\n    '</div></header><hr><div class=\\\"markdown-body\\\">' +\\n    ((__t = ( data.html )) == null ? '' : __t) +\\n    '</div><footer>';\\n     data.labels.forEach(function(label) {\\n    __p += '<a href=\\\"' +\\n    ((__t = ( _.hash.build({label: label.name}) )) == null ? '' : __t) +\\n    '\\\" style=\\\"background:#' +\\n    ((__t = ( label.color)) == null ? '' : __t) +\\n    '\\\">' +\\n    __e( label.name) +\\n    '</a>';\\n     });\\n    __p += '</footer></article>';\\n\\n    }\\n    return __p\\n  };\\n\\n  templates['index'] =   function(obj) {\\n    obj || (obj = {});\\n    var __t, __p = '', __e = _.escape, __j = Array.prototype.join;\\n    function print() { __p += __j.call(arguments, '') }\\n    with (obj) {\\n    __p += '<h1>' +\\n    __e( config.name ) +\\n    '</h1><hr><ul class=\\\"list\\\">';\\n     data.forEach(function(article) {\\n    __p += '<li class=\\\"list__item\\\"><a class=\\\"list__title\\\" href=\\\"' +\\n    __e( _.hash.build({id: article.number}) ) +\\n    '\\\">' +\\n    __e( article.title ) +\\n    '</a><div class=\\\"list__meta\\\"> #' +\\n    __e( article.number ) +\\n    ' posted at <time class=\\\"list__time\\\" datetime=\\\"' +\\n    __e( article.created_at ) +\\n    '\\\">' +\\n    __e( article.created_at ) +\\n    '</time></div></li>';\\n     }) ;\\n    __p += '</ul>';\\n     if (meta.Link) {\\n    __p += '<hr><nav class=\\\"pagination\\\">';\\n\\n          meta.Link.forEach(function(link) {\\n          var pageIndex = link[0].match(/[?&]page=(\\\\d+)/)[1]\\n    __p += '<a href=\\\"' +\\n    __e( _.hash.build({page: pageIndex}) ) +\\n    '\\\" title=\\\"' +\\n    __e( link[1].rel ) +\\n    '\\\">' +\\n    __e( link[1].rel ) +\\n    '</a>';\\n     }) ;\\n    __p += '</nav>';\\n     }\\n\\n    }\\n    return __p\\n  };\\n;return templates})()\")(config)\n\n    /* global config: true, _: true */\nconst github = (function () {\n  const head = document.head || document.getElementsByTagName('head')[0]\n  const ANONYMOUS_TOKEN_LIMIT = 60\n  const ASSUME_TOKEN_LIMIT = 5000\n  const timeDiff = 0\n  const anonymousToken = newToken('')\n  const tokens = _.map(config.accessTokens, function (token) {\n    if (_.isArray(token)) {\n      token = token.join('')\n    }\n\n    return newToken(token)\n  })\n\n  const GITHUB_ISSUES_API_BASE = (function () {\n    let url = [config.api]\n    if (config.repoId) {\n      url = url.concat(['repositories', config.repoId])\n    } else {\n      url = url.concat(['repos', config.owner, config.repo])\n    }\n    url.push('issues')\n\n    return url.join('/')\n  })()\n\n  function newToken(token) {\n    return {\n      token,\n      remaining: token ? ASSUME_TOKEN_LIMIT : ANONYMOUS_TOKEN_LIMIT,\n      reset: 0,\n    }\n  }\n\n  function randomId() {\n    return (Math.random() * _.now()).toString(16).replace('.', '').slice(0, 6)\n  }\n\n  function request(path, parameters, token) {\n    token = token || {}\n    const callbackName = `jsonp_${randomId()}`\n    const script = document.createElement('script')\n    parameters = _.assign({}, parameters, {\n      callback: callbackName,\n    })\n\n    if (token.token) {\n      parameters.access_token = token.token\n    }\n\n    script.src = `${GITHUB_ISSUES_API_BASE + path}?${_.search.build(\n      parameters,\n    )}`\n    head.appendChild(script)\n\n    function gc() {\n      head.removeChild(script)\n      window[callbackName] = null\n    }\n\n    return new Promise(function (resolve, reject) {\n      window[callbackName] = function (response) {\n        resolve(response)\n        gc()\n      }\n      script.onerror = function (error) {\n        reject(error)\n        gc()\n      }\n    }).then(function (data) {\n      return handleResponse(data, token)\n    })\n  }\n\n  function handleResponse(response, token) {\n    if (!response || !response.data) {\n      return Promise.reject(new Error('no data found.'))\n    }\n\n    if (response.data.message) {\n      return Promise.reject(response.data.message)\n    }\n\n    const {meta} = response\n    if (meta) {\n      const remaining = meta['X-RateLimit-Remaining']\n      const reset = meta['X-RateLimit-Reset']\n\n      if (remaining) {\n        token.remaining = parseInt(remaining, 10)\n      }\n\n      if (reset) {\n        token.reset = parseInt(remaining, 10) * 1000\n      }\n    }\n\n    return response\n  }\n\n  function resetTokenRemaining(token) {\n    if (!token.remaining && _.now() - anonymousToken.rest > 2 * 1000 * 1000) {\n      token.remaining = ASSUME_TOKEN_LIMIT\n    }\n\n    return token\n  }\n\n  function getToken() {\n    _.forEach(tokens, resetTokenRemaining)\n    return _.find(tokens, function (token) {\n      return token.remaining\n    })\n  }\n\n  function requestWithToken(path, parameters) {\n    const token = getToken()\n\n    return token\n      ? request(path, parameters, token)\n      : Promise.reject(new Error('no token'))\n  }\n\n  function get(path, parameters) {\n    resetTokenRemaining(anonymousToken)\n\n    if (anonymousToken.remaining) {\n      return request(path, parameters, anonymousToken).catch(function () {\n        return requestWithToken(path, parameters)\n      })\n    }\n    return requestWithToken(path, parameters)\n  }\n\n  return {\n    get,\n  }\n})()\n\n    /* global config: true, _: true, templates: true, github: true, article: true */\nconst index = (function () {\n  const INDEX_STORAGE_KEY = 'index'\n  const expireTime = ((config.cache && config.cache.index) || 0) * 1000\n  const render = templates.index\n\n  function cached(page) {\n    if (!expireTime) {\n      return\n    }\n    return _.localforage.getItem(INDEX_STORAGE_KEY).then(function (cached) {\n      if (!cached || cached.pageSize !== config.pageSize) {\n        return\n      }\n      const data = cached.pages[page - 1]\n      if (!data || !data.time || _.now() - data.time > expireTime) {\n        return\n      }\n      return data\n    })\n  }\n\n  function fetch(page) {\n    return github\n      .get('', {\n        page,\n        per_page: config.pageSize,\n        state: 'open',\n        creator: config.owner,\n      })\n      .then(function (data) {\n        storage(data, page)\n        return data\n      })\n  }\n\n  function storage(data, page) {\n    article.storage({\n      data: data.data,\n    })\n\n    if (!expireTime) {\n      return data\n    }\n    return _.localforage\n      .getItem(INDEX_STORAGE_KEY)\n      .then(function (cached) {\n        if (!cached || cached.pageSize !== config.pageSize) {\n          cached = {\n            pages: [],\n            pageSize: config.pageSize,\n          }\n        }\n\n        cached.pages[page - 1] = {\n          meta: {\n            Link: data.meta.Link,\n            ETag: data.meta.ETag,\n          },\n          time: _.now(),\n          data: [],\n        }\n\n        cached.pages[page - 1].data = data.data.map(function (item) {\n          return {\n            created_at: item.created_at,\n            title: item.title,\n            number: item.number,\n          }\n        })\n\n        cached.time = _.now()\n\n        return cached\n      })\n      .then(function (cached) {\n        return _.localforage.setItem(INDEX_STORAGE_KEY, cached)\n      })\n      .then(function () {\n        return data\n      })\n  }\n\n  function get(page) {\n    page = parseInt(page, 10) || 1\n    if (page < 1) {\n      page = 1\n    }\n\n    return Promise.resolve()\n      .then(function () {\n        return cached(page)\n      })\n      .then(function (data) {\n        return data || fetch(page)\n      })\n  }\n\n  return {\n    get,\n    storage,\n    render,\n  }\n})()\n\n    /* global _: true, config: true, templates: true, github: true */\nconst article = (function () {\n  const ARTICLES_STORAGE_KEY = 'articles'\n  const expireTime = ((config.cache && config.cache.article) || 0) * 1000\n  const render = templates.article\n\n  function cached(id) {\n    if (!expireTime) {\n      return\n    }\n\n    return _.localforage.getItem(ARTICLES_STORAGE_KEY).then(function (cached) {\n      const data = cached && cached[id]\n      if (!data || !data.time || _.now() - data.time > expireTime) {\n        return\n      }\n      return data\n    })\n  }\n\n  function fetch(id) {\n    return github.get(`/${id}`).then(function (data) {\n      storage(data)\n      return data\n    })\n  }\n\n  function storage(data) {\n    if (!expireTime) {\n      return data\n    }\n\n    return _.localforage\n      .getItem(ARTICLES_STORAGE_KEY)\n      .then(function (cached) {\n        cached = cached || {}\n\n        if (data.data.forEach) {\n          data.data.forEach(function (item) {\n            cached[item.number] = {\n              data: item,\n              id: item.number,\n              time: _.now(),\n              meta: {\n                ETag: data.meta && data.meta.ETag,\n              },\n            }\n          })\n        } else {\n          cached[data.data.number] = {\n            data: data.data,\n            id: data.data.number,\n            time: _.now(),\n            meta: {\n              ETag: data.meta && data.meta.ETag,\n            },\n          }\n        }\n\n        return cached\n      })\n      .then(function (cached) {\n        return _.localforage.setItem(ARTICLES_STORAGE_KEY, cached)\n      })\n      .then(function () {\n        return data\n      })\n  }\n\n  function get(id) {\n    id = Number(id)\n\n    return Promise.resolve()\n      .then(function () {\n        return cached(id)\n      })\n      .then(function (data) {\n        return data || fetch(id)\n      })\n      .then(function (data) {\n        return _.markdown(data.data.body).then(function (html) {\n          data.data.html = html\n          return data\n        })\n      })\n  }\n\n  return {\n    get,\n    storage,\n    render,\n  }\n})()\n\n    /* global config: true, _: true, article: true, index: true */\nconst app = (function () {\n  const container = document.getElementById('js-app')\n\n  function showHTML(html) {\n    container.innerHTML = html\n  }\n\n  function showError(error) {\n    console.trace(error)\n    container.innerHTML =\n      'error occured <button onclick=\"location.reload()\">retry</button>'\n  }\n\n  function showIndex(page) {\n    document.title = config.name\n    return index.get(page).then(index.render)\n  }\n\n  function showArticle(id) {\n    return article\n      .get(id)\n      .then(function (data) {\n        document.title = data.data.title\n        return data\n      })\n      .then(article.render)\n  }\n\n  function showLoading() {\n    container.innerHTML = 'loading...'\n  }\n\n  function showPage() {\n    const query = _.hash.parse(window.location.hash)\n    showLoading()\n    let promise\n\n    if (query.id) {\n      promise = showArticle(query.id)\n    } else if (query.label) {\n      alert('暂时不支持标签')\n      window.history.go(-1)\n      return\n    } else {\n      promise = showIndex(query.page)\n    }\n\n    return promise.then(showHTML).catch(showError)\n  }\n\n  function run() {\n    showPage()\n    window.addEventListener('hashchange', showPage, false)\n  }\n\n  return {\n    run,\n  }\n})()\n\n\n    app.run()\n  })\n})()\n"]}